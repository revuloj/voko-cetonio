var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};$jscomp.polyfill=function(a,b,c,d){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,d):$jscomp.polyfillUnisolated(a,b,c,d))};
$jscomp.polyfillUnisolated=function(a,b,c,d){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))return;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,d){var e=a.split(".");a=1===e.length;d=e[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var f=0;f<e.length-1;f++){var g=e[f];if(!(g in d))return;d=d[g]}e=e[e.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[e]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==c&&(void 0===$jscomp.propertyToPolyfillSymbol[e]&&($jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(e):
$jscomp.POLYFILL_PREFIX+e),$jscomp.defineProperty(d,$jscomp.propertyToPolyfillSymbol[e],{configurable:!0,writable:!0,value:b})))};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(b,c){var d=$jscomp.checkStringArgs(this,b,"startsWith");b+="";var e=d.length,f=b.length;c=Math.max(0,Math.min(c|0,d.length));for(var g=0;g<f&&c<e;)if(d[c++]!=b[g++])return!1;return g>=f}},"es6","es3");
$jscomp.polyfill("String.prototype.repeat",function(a){return a?a:function(b){var c=$jscomp.checkStringArgs(this,null,"repeat");if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var d="";b;)if(b&1&&(d+=c),b>>>=1)c+=c;return d}},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(b,c){var d=$jscomp.checkStringArgs(this,b,"endsWith");b+="";void 0===c&&(c=d.length);c=Math.max(0,Math.min(c|0,d.length));for(var e=b.length;0<e&&0<c;)if(d[--c]!=b[--e])return!1;return 0>=e}},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(b,c){var d=this;d instanceof String&&(d=String(d));var e=d.length;c=c||0;for(0>c&&(c=Math.max(c+e,0));c<e;c++){var f=d[c];if(f===b||Object.is(f,b))return!0}return!1}},"es7","es3");$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(b,c){return-1!==$jscomp.checkStringArgs(this,b,"includes").indexOf(b,c||0)}},"es6","es3");
$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(a){if(a)return a;var b=function(e,f){this.$jscomp$symbol$id_=e;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:f})};b.prototype.toString=function(){return this.$jscomp$symbol$id_};var c=0,d=function(e){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return new b("jscomp_symbol_"+(e||"")+"_"+c++,e)};return d},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=$jscomp.global[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&$jscomp.defineProperty(d.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,b){a instanceof String&&(a+="");var c=0,d=!1,e={next:function(){if(!d&&c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");
String.prototype.hashCode=function(){var a=0,b;if(0===this.length)return a;for(b=0;b<this.length;b++){var c=this.charCodeAt(b);a=(a<<5)-a+c;a|=0}return a};String.prototype.hashFnv32a=function(a,b){var c,d=void 0===b?2166136261:b;b=0;for(c=this.length;b<c;b++)d^=this.charCodeAt(b),d+=(d<<1)+(d<<4)+(d<<7)+(d<<8)+(d<<24);return a?("0000000"+(d>>>0).toString(16)).substr(-8):d>>>0};
function alCx(a){return a.replace("\u0108","Cx").replace("\u011c","Gx").replace("\u0124","Hx").replace("\u0134","Jx").replace("\u015c","Sx").replace("\u016c","Ux").replace("\u0109","cx").replace("\u011d","gx").replace("\u0125","hx").replace("\u0135","jx").replace("\u015d","sx").replace("\u016d","ux")}
function quoteattr(a,b){b=b?"&#13;":"\n";return(""+a).replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r\n/g,b).replace(/[\r\n]/g,b)}function formatFloat(a,b){b||(b=100);var c=Math.abs(a),d=Math.floor(c);c=Math.round((c-d)*b);c==b&&(c=0,d++);for(var e=c.toString(),f=10;f<b&&c*f<b;)e="0"+e,f*=10;return(0>a?"-":" ")+d.toString()+","+e};var regex_tld=/<tld\s+lit="([^"]+)"\s*\/>/g,regex_xmltag=/<[^>]+>/g;function get_line_pos(a,b){var c=0,d=0;for(i=0;i<a;i++)"\n"==b[i]&&(c++,d=i);pos=0==c?a:a-d-1;return{line:c,pos:pos}}function replaceTld(a,b){return b.replace(/<tld\/>/g,a).replace(regex_tld,"$1"+a.substr(1))}
function traduk_lingvoj(a){var b={};a=a.replace(/&[a-zA-Z0-9_]+;/g,"?");try{var c=$("vortaro",$.parseXML(a))}catch(d){console.error("Pro nevalida XML ne eblas trovi traduklingvojn.");return}c.find("trd[lng],trdgrp[lng]").each(function(d){b[$(this).attr("lng")]=!0});return b}function innerXML(a){try{return(new XMLSerializer).serializeToString(a).replace(/^<[^>]+>/,"").replace(/<\/[^>]+>$/,"")}catch(b){try{return a.innerHTML}catch(c){alert("XmlSerializer not supported")}}return!1}
function outerXML(a){try{return(new XMLSerializer).serializeToString(a)}catch(b){try{return a.outerHTML}catch(c){alert("Xmlserializer not supported")}}return!1}
function insert_trd_lng(a,b,c,d){d=trd_xml_dom(c,b,d);var e=$(a).children("trd[lng='"+c+"'],trdgrp[lng='"+c+"']");if(e.length)replaceChildren(a,e[0],d.childNodes);else{var f=[];$(a).children("trd[lng],trdgrp[lng]").each(function(g,k){f.push($(this).attr("lng"))});(c=lingvo_post(c,f))?(c=$(a).children("trd[lng='"+c+"'],trdgrp[lng='"+c+"']"),beforeChildren(a,c[0],d.childNodes,"","\n"+b)):(b=b.substr(2),appendChildren(a,d.childNodes,b,"\n"+b))}}
function replaceChildren(a,b,c,d,e){d&&a.insertBefore(a.ownerDocument.createTextNode(d),before);for(d=0;d<c.length;d++)a.insertBefore(c[d],b);e&&a.insertBefore(a.ownerDocument.createTextNode(e),before);a.removeChild(b)}function beforeChildren(a,b,c,d,e){d&&a.insertBefore(a.ownerDocument.createTextNode(d),b);for(d=0;d<c.length;d++)a.insertBefore(c[d],b);e&&a.insertBefore(a.ownerDocument.createTextNode(e),b)}
function appendChildren(a,b,c,d){c&&a.appendChild(a.ownerDocument.createTextNode(c));for(c=0;c<b.length;c++)a.appendChild(b[c]);d&&a.appendChild(a.ownerDocument.createTextNode(d))}
function trd_xml_dom(a,b,c){parser=new DOMParser;xmlDoc=parser.parseFromString("<xml></xml>","text/xml");var d=xmlDoc.documentElement;if(1==c.length&&c[0]){var e=d.appendChild(xmlDoc.createElement("trd"));e.setAttribute("lng",a);for(var f=parseTrd(parser,c[0]),g=0;g<f.length;g++){var k=xmlDoc.importNode(f[g],!0);e.appendChild(k)}}else{var l=xmlDoc.createElement("trdgrp");l.setAttribute("lng",a);l.appendChild(xmlDoc.createTextNode("\n"));for(a=0;a<c.length;a++)if(c[a]){e=xmlDoc.createElement("trd");
f=parseTrd(parser,c[a]);for(g=0;g<f.length;g++)k=xmlDoc.importNode(f[g],!0),e.appendChild(k);l.appendChild(xmlDoc.createTextNode(b+"  "));l.appendChild(e);e=a<c.length-1?xmlDoc.createTextNode(",\n"):xmlDoc.createTextNode("\n");l.appendChild(e)}1<l.childNodes.length&&(l.appendChild(xmlDoc.createTextNode(b)),d.appendChild(l))}return d}
function parseTrd(a,b){try{var c=a.parseFromString("<xml>"+b+"</xml>","text/xml")}catch(d){throw d.name="SyntaxError","Nevalida XML en traduko: "+quoteattr(b);}if(0<c.getElementsByTagName("parsererror").length)throw"Nevalida XML en traduko: "+quoteattr(b);return c.documentElement.childNodes}function lingvo_post(a,b){for(var c=0;c<b.length;c++)if(b[c]>a)return b[c];return null}function enshovo(a){for(var b="",c=a.length-1;-1<c;c--)if(" "==a[c])b+=" ";else break;return b}
function enshovo_antaua_linio(a,b){for(var c="",d=b;" "==a[d];)d++;for(var e=b-1;-1<e;e--)if(" "==a[e])c+=" ";else if("\n"==a[e])break;else c="";return c.substr(d-b)}function all_spaces(a){for(var b=0;" "==a[b]&&b<a.length;)b++;return b==a.length}
function kameligo(a,b){b=void 0===b?"":b;var c="";a=a.split(" ");b=b?b.substr(0,1).toUpperCase():"";for(var d=0;d<a.length;d++)c=a[d].startsWith("<tld/>")?c+(' <tld lit="'+b+'"/>'+a[d].substr(6)):c+(" "+a[d].substr(0,1).toUpperCase()+a[d].substr(1).toLowerCase());return c.substr(1)}function minuskligo(a,b){b=void 0===b?"":b;a=a.toLowerCase();b&&b[0].toLowerCase()!=b[0]&&(a=a.replace(/<tld[^\/>]*\/>/,'<tld lit="'+b[0].toLowerCase()+'"/>'));return a}
function forigu_markup(a){return a.replace(regex_xmltag,"")}function linirompo(a,b,c){b=void 0===b?0:b;c=void 0===c?80:c;var d=0,e=0,f=0;ispaces=b?" ".repeat(b):"";for(a=a.replace(/[ \t\n]+/g," ").trim();d<a.length;)d-f>c&&e>f?(a=a.substring(0,e)+"\n"+ispaces+a.substring(e+1),f=e,d+=b):0<d&&" "==a[d]&&" "!=a[d-1]&&"\n"!=a[d-1]?e=d:"\n"==a[d]&&(f=d),d++;return a};var bar_styles="\u2581\u2582\u2583\u2584\u2585\u2586\u2587\u2588 \u28c0\u28c4\u28e4\u28e6\u28f6\u28f7\u28ff \u28c0\u28c4\u28c6\u28c7\u28e7\u28f7\u28ff \u25cb\u25d4\u25d0\u25d5\u2b24 \u25a1\u25f1\u25e7\u25a3\u25a0 \u25a1\u25f1\u25a8\u25a9\u25a0 \u25a1\u25f1\u25a5\u25a6\u25a0 \u2591\u2592\u2593\u2588 \u2591\u2588 \u2b1c\u2b1b \u25b1\u25b0 \u25ad\u25fc \u25af\u25ae \u25ef\u2b24 \u26aa\u26ab".split(" ");function repeat(a,b){for(var c="",d=0;d<b;d++)c+=a;return c}
function make_percent_bar(a,b,c,d){var e=Number.POSITIVE_INFINITY,f=b[b.length-1],g=b.length-1;if(100==a)return{str:repeat(f,d),delta:0};a/=100;for(var k=d;k>=c;k--){var l=a*k;d=Math.floor(l);l-=d;var r=Math.floor(l*g);0!=a&&0==d&&0==r&&(r=1);l=100*Math.abs(a-(d+r/g)/k);if(l<e){e=l;var u=b[r];d==k&&(u="");u=repeat(f,d)+u+repeat(b[0],k-d-1)}}return{str:u,delta:e}};var xml_sxablonoj={art:':<?xml version="1.0"?>\n:<!DOCTYPE vortaro SYSTEM "../dtd/vokoxml.dtd">\n\n:<vortaro>\n:  <art mrk="$Id$">\n:    <kap>\n:      <rad>{rad}</rad>/{fin}\n:    </kap>\n:\n:<drv mrk="{dos}.0{fin}">\n:  <kap><tld/>{fin}</kap>\n:  <snc>\n:    <dif>\n:      {dif}:\n:      <ekz>!!!ekzemplo kun fonto!!!</ekz>\n:    </dif>\n:    <trd lng="de">??? germana traduko ???</trd>\n:    <trd lng="en">??? angla traduko ???</trd>\n:    <trd lng="fr">??? franca traduko ???</trd>\n:  </snc>\n:</drv>\n:\n:  </art>\n:</vortaro>\n',
drv:':<drv mrk="{mrk}">\n:  <kap>\n:    {kap}\n:  </kap>\n:  <snc>\n:    <dif>\n:      {dif}:\n:      <ekz>!!!ekzemplo kun fonto!!!</ekz>\n:    </dif>\n:  </snc>\n:  <trd lng="de">??? germana traduko ???</trd>\n:  <trd lng="en">??? angla traduko ???</trd>\n:  <trd lng="fr">??? franca traduko ???</trd>\n:</drv>\n:\n',snc:':<snc mrk="{mrk}">\n:  <dif>\n:    {dif}:\n:    <ekz>!!!ekzemplo kun fonto!!!</ekz>\n:  </dif>\n:  <trd lng="de">??? germana traduko ???</trd>\n:  <trd lng="en">??? angla traduko ???</trd>\n:  <trd lng="fr">??? franca traduko ???</trd>\n:</snc>\n',
ref:'!tip        :<ref cel="{cel}">{enh}</ref>\ntip && !lst :<ref tip="{tip}" cel="{cel}">{enh}</ref>\nlst         :<ref tip="{tip}" lst="voko:{lst}" cel="{cel}">{enh}</ref>\n',refgrp:'    :<refgrp tip="{tip}">\nlst :   <ref lst="voko:{lst}" cel="{cel}">{enh}</ref>,\n!lst:   <ref cel="{cel}">{enh}</ref>,\n    :</refgrp>\n',fnt:'                   :<fnt>\nbib                :  <bib>{bib}</bib>\naut                :  <aut>{aut}</aut>\nvrk && url         :  <vrk><url ref="{url}"\nvrk && url         :      >{vrk}</url></vrk>\nvrk && !url        :  <vrk>{vrk}</vrk>\n!vrk && lok && url :  <lok><url ref="{url}"\n!vrk && lok && url :      >{lok}</url></lok>\n!vrk && !lok && url:  <lok><url ref="{url}"\n!vrk && !lok && url:      >{url}</url></lok>\nlok && !url        :  <lok>{lok}</lok>\nlok && vrk && url  :  <lok>{lok}</lok>\n                   :</fnt>;\n',
ekz:":<ekz>\n:  {frazo}\n:  {fnt}\n:</ekz>\n",rim:"   :<rim>\n   :  {rim}\naut:  <aut>{aut}</aut>\n   :</rim>\n",adm:"   :<adm>\n   :  {rim}\naut:  <aut>{aut}</aut>\n   :</adm>\n",bld:'        :<bld\nurl     :  lok="{url}"\nprm     :  prm="{prm}"\nlrg     :  lrg="{lrg}"\n        :  >{frazo}\naut||fnt:    <fnt>\naut     :      <aut>{aut}</aut>\nfnt     :      <lok><url ref="{fnt}"\nfnt     :          >{fnt_dec}</url></lok>\naut||fnt:    </fnt>\n        :</bld>\n'},html_sxablonoj={vrk:'vrk && url : <a href="{url}" target="_new">{vrk}</a>\nvrk && !url: {vrk}\n',
bib:'bib && url : <a href="{url}" target="_new">{bib}</a>\nbib && !url: {bib}\n',vrk_title:"aut        : {aut}:\nvrk && lok : {vrk},\nvrk && !lok: {vrk}\nlok        : {lok}\n",bib_title:"bib && vrk : {bib}, {vrk}\nbib && !vrk : {bib}, {bib_text}\n",dt_trovo:'       :<dt>{prompt} <span class="trovo_titolo">\nurl    :  <a href="{url}" target="_new" >{title}</a>\n!url   :  {title}\n       :  </span>\n       :  <button id="r_{id}"/>\nenm_btn:  <button id="e_{id}"/>\n       :</dt>\n',dt_trovo_cit:'       :<dt>{prompt} <span class="trovo_titolo">\n       :  {title}\n       :  </span>\n       :  <button id="r_{id}"/>\nenm_btn:  <button id="e_{id}"/>\n       :</dt>\n',
dd_trovo_bld:':<table><tr><td>\n:  <a href="{original}" target="_new"><img src="{thumbnail}"/></a>\n:</td><td>{t_html}</td></tr></table>\n',err_msg:'             :<li\nid           :id="{id}"\ncls          :class="{cls}"\nline && pos  :value="{line}:{pos}"\nline && !pos :value="{line}"\n!line && !pos:value="=)"\nline         :title="linio {line}"\n             :>{msg}</li>'},snc_sxablonoj={"\u0109efurbo":'  <snc mrk="xxx.B0o.cxefurbo">\n    <uzo tip="fak">GEOG</uzo>\n    <uzo tip="fak">POL</uzo>\n    <dif>\n      <ref tip="lst" cel="urb.cxef0o" lst="voko:\u0109efurboj">\u0108efurbo</ref> \n      kaj la plej granda urbo \n      de {r:<ref tip="malprt" cel="x.X0ujo">X-ujo</ref>}\n      {s:(99\u02da99\'E, 55\u02da55\'N)}; \n      \u0109e la bordoj de la riverego {r:<ref cel="r.R0o">Rivero</ref>}:\n      {e:<ekz>...</ekz>}\n    </dif>\n  </snc>',
lando:'  <snc mrk="xxx.B0ujo.lando">\n    <uzo tip="fak">GEOG</uzo>\n    <uzo tip="fak">POL</uzo>\n    <dif>\n      <ref tip="lst" lst="voko:\u015dtatoj" cel="sxtat.0o">\u015ctato</ref> situanta en\n      {s:okcidenta} {r:<ref tip="malprt" cel="euxrop1.E0o">E\u016dropo</ref>}\n      kun \u0109efurbo {r:<ref tip="prt" cel="brusel.B0o.urb">Bruselo</ref>}\n      kaj limanta \n      norde al {r:<ref tip="vid" cel="nederl.N0o">Nederlando</ref>}, \n      oriente al {r:<ref tip="vid" cel="german1.G0ujo">Germanujo</ref>}, \n      sude al {r:<ref tip="vid" cel="franc.F0ujo">Francujo</ref>}\n      kaj okcidente al {r:<ref tip="vid" cel="mar.Norda_M0o">Norda Maro</ref>}.\n      </dif>\n      {r:<ref tip="sin" cel="belgi.B0o">Belgio</ref>}\n  </snc>',
persono:'  <snc mrk="xxx.P0o.persono">\n    <uzo tip="fak">PERS</uzo>\n    <dif>\n      Nacilingve: <trd lng="xx">{s:Pasteur}\n      <klr tip="ind">({s:Louis})</klr></trd>, \n      {s:1822-1895};\n      {s:franca sciencisto, fondinto} de\n      {r:<ref tip="vid" cel="mikrob1.0o">mikrobiologio</ref>},\n      kaj {s:inventinta/proponinta/... metodon de}\n      {r:<ref tip="vid" cel="pasteuxriz.0o">paste\u016drizo</ref>}:\n      {e:<ekz>...</ekz>}\n    </dif>\n  </snc>',rivero:'  <snc>\n    <uzo tip="fak">GEOG</uzo>\n    <dif>\n      {r:<ref tip="malprt" cel="azi.OkcidentaA0o">Okcident-Azia</ref>}\n      <ref tip="lst" cel="river.0o" lst="voko:riveroj">rivero</ref>,\n      fluanta el {s:Turkujo}\n      tra {s:Irako} \n      en {s:la Persan Golfon}:\n      {e:<ekz>...</ekz>}\n    </dif>\n  </snc>',
urbo:'  <snc mrk="xxx.B0o.urbo">\n    <uzo tip="fak">GEOG</uzo>\n    <dif>\n      {s:X-landa}\n      <ref tip="lst" cel="urb.0o" lst="voko:urboj">urbo</ref>\n      en {s:la ...sub\u015dtato/regiono...} {r:<ref tip="malprt" cel="r.R0ujo">Regujo</ref>},\n      {s:grava foira urbo jam de la 12a jc}:\n      {e:<ekz>...</ekz>}\n    </dif>\n  </snc>',"vegeta\u0135o":'  <snc mrk="krizan.0o.BOT">\n    <uzo tip="fak">BOT</uzo>\n    <dif>\n      {r:<ref tip="lst" cel="genr.0o.BIO" lst="voko:botanikaj_genroj">Genro</ref>}\n      el familio de {r:<ref tip="lst" lst="voko:asteroparencoj" cel="astera.0oj">asteracoj</ref>},\n      (<trd lng="la">{s:Chrysanthemum}</trd>),\n      {s: botanika priskribo ...., \u011dardene kultivata ktp}:\n      {e:<ekz>...</ekz>}\n    </dif>\n  </snc>'};var XML\u015cablono=function(a){this.sxablono=a};
XML\u015cablono.prototype={xml:function(a,b){b=void 0===b?0:b;for(var c=this.sxablono.split("\n"),d="",e=0;e<c.length;e++){var f=c[e],g=f.indexOf(":");if(0<=g){var k=f.slice(0,g);f=f.slice(g+1)}else k="";this.eval_condition(k,a)&&(d+=this.eval_varstring(f,a)+"\n")}b&&(a=" ".repeat(b),d=a+d.replace(/\n/g,"\n"+a).trim());return d},eval_condition:function(a,b){return(a=a.trim())?(new Function("return "+a.replace(/(\w+)/g,"this.$1"))).call(b):!0},eval_varstring:function(a,b){return a.replace(/\{([a-z_]+)\}/g,
function(c,d){return b[d]})}};function extend(a,b){a.prototype=Object.create(b.prototype);Object.defineProperty(a.prototype,"constructor",{value:b,enumerable:!1,writable:!0})}var XMLArtikolo=function(a){XML\u015cablono.call(this,xml_sxablonoj.art);a.dif=a.dif.replace(/~/g,"<tld/>");this.art=a};extend(XMLArtikolo,XML\u015cablono);XMLArtikolo.prototype.xml=function(a){return XML\u015cablono.prototype.xml.call(this,this.art,a)};
var XMLDeriva\u0135o=function(a){XML\u015cablono.call(this,xml_sxablonoj.drv);a.dif=a.dif.replace(/\n/g,"\n       ").replace(/~/g,"<tld/>");a.mrk=alCx(a.mrk+"."+a.kap.replace(/~/g,"0").replace(/ /g,"_"));a.kap=a.kap.replace(/~/g,"<tld/>");this.drv=a};extend(XMLDeriva\u0135o,XML\u015cablono);XMLDeriva\u0135o.prototype.xml=function(a){return XML\u015cablono.prototype.xml.call(this,this.drv,a)};
var XMLSenco=function(a){XML\u015cablono.call(this,xml_sxablonoj.snc);a.dif=a.dif.replace(/\n/g,"\n       ").replace(/~/g,"<tld/>");a.mrk=a.drvmrk+"."+a.mrk;this.snc=a};extend(XMLSenco,XML\u015cablono);XMLSenco.prototype.xml=function(a){return XML\u015cablono.prototype.xml.call(this,this.snc,void 0===a?2:a)};var XMLFonto=function(a){XML\u015cablono.call(this,xml_sxablonoj.fnt);this.fnt=a};extend(XMLFonto,XML\u015cablono);
XMLFonto.prototype.xml=function(a){return XML\u015cablono.prototype.xml.call(this,this.fnt,a)};var XMLEkzemplo=function(a){XML\u015cablono.call(this,xml_sxablonoj.ekz);this.fonto=new XMLFonto(a);a.frazo=a.frazo.replace(/~/g,"<tld/>");this.frazo=a.frazo};extend(XMLEkzemplo,XML\u015cablono);XMLEkzemplo.prototype.xml=function(a){var b={fnt:this.fonto.xml(2).trim(),frazo:this.frazo};return XML\u015cablono.prototype.xml.call(this,b,a)};
var XMLReferenco=function(a){XML\u015cablono.call(this,xml_sxablonoj.ref);"nuda"==a.tip&&(a.tip="");this.ref=a};extend(XMLReferenco,XML\u015cablono);XMLReferenco.prototype.xml=function(a){return XML\u015cablono.prototype.xml.call(this,this.ref,void 0===a?0:a).replace(/\s+$/,"")};var XMLReferencGrupo=function(a){XML\u015cablono.call(this,xml_sxablonoj.refgrp);"nuda"==a.tip&&(a.tip="");this.ref=a};extend(XMLReferencGrupo,XML\u015cablono);
XMLReferencGrupo.prototype.xml=function(a){return XML\u015cablono.prototype.xml.call(this,this.ref,void 0===a?4:a)};var XMLRimarko=function(a,b){XML\u015cablono.call(this,"rim"==(void 0===b?"rim":b)?xml_sxablonoj.rim:xml_sxablonoj.adm);this.rim=a};extend(XMLRimarko,XML\u015cablono);XMLRimarko.prototype.xml=function(a){return XML\u015cablono.prototype.xml.call(this,this.rim,a)};
var XMLBildo=function(a){XML\u015cablono.call(this,xml_sxablonoj.bld);if(a.url.startsWith("https://upload.wikimedia.org/wikipedia/commons/")){var b=a.url.split("/");b=b[b.length-1];a.url.endsWith(".svg")?a.url="&WCU;/"+a.url.substr(47):(a.url="&WCU;/thumb/"+a.url.substr(47)+"/"+a.lrg+"px-"+b,a.lrg="")}a.fnt=a.fnt.replace("https://commons.wikimedia.org/wiki","&WCW;");a.frazo=a.frazo.replace(/~/g,"<tld/>");a.prm=a.prm.replace(/public domain/i,"PD");this.bld=a};extend(XMLBildo,XML\u015cablono);
XMLBildo.prototype.xml=function(a){return XML\u015cablono.prototype.xml.call(this,this.bld,a)};var HTMLFonto=function(a){this.source=a;this.v=new XML\u015cablono(html_sxablonoj.vrk);this.b=new XML\u015cablono(html_sxablonoj.bib);this.vt=new XML\u015cablono(html_sxablonoj.vrk_title);this.bt=new XML\u015cablono(html_sxablonoj.bib_title)};
HTMLFonto.prototype={bib_text:function(a){for(var b=0;b<this.source.length;b++)if(entry=this.source[b],entry.value==a)return entry.label},html:function(a){var b=a.bib;a={vrk:this.v.xml(a).trim(),bib:this.b.xml(a).trim(),aut:a.aut,lok:a.lok};a.vrk=this.vt.xml(a).trim();b?(a.bib_text=this.bib_text(b),b=this.bt.xml(a).trim()):b=a.vrk;return b}};var HTMLTrovoDt=function(){this.t=new XML\u015cablono(html_sxablonoj.dt_trovo);this.tc=new XML\u015cablono(html_sxablonoj.dt_trovo_cit)};
HTMLTrovoDt.prototype={html:function(a){return a.title.includes(a.url)?this.tc.xml(a).trim():this.t.xml(a).trim()}};var HTMLTrovoDdBld=function(){this.dd=new XML\u015cablono(html_sxablonoj.dd_trovo_bld)};HTMLTrovoDdBld.prototype={html:function(a){return this.dd.xml(a).trim()}};var HTMLError=function(){this.li=new XML\u015cablono(html_sxablonoj.err_msg)};HTMLError.prototype={html:function(a){return this.li.xml(a).trim()}};var Snc\u015cablono=function(a){this.sxablono=snc_sxablonoj[a]};
Snc\u015cablono.prototype={form:function(){return quoteattr(this.sxablono).replace(/\{([osre]):([^\}]+)\}/g,this.form_element)},html:function(){for(var a=this.form().split("\n"),b="",c=0;c<a.length;c++)b+='<tr><td><b class="sxbl">&ndash;</b></td><td><pre class="line">'+a[c]+"</pre></td></tr>";return b},form_element:function(a,b,c,d){a=b+"_"+d;switch(b){case "s":return'<span class="sxbl" id="'+a+'"><input type="text" size="'+c.length+'" id="i'+a+'" value="'+c+'" /></span></input></span>';case "r":return'<span class="sxbl" id="'+
a+'">'+c+'</span><button class="ui-button ui-corner-all ui-button-icon-only"><span class="ui-icon ui-icon-search"></button>';case "e":return'<span class="sxbl" id="'+a+'">'+c+'</span><button class="ui-button ui-corner-all ui-button-icon-only"><span class="ui-icon ui-icon-search"></button>'}}};/*
 (c) 2008 - 2018 Wolfram Diestel, Wieland Pusch, Bart Demeyere & al.
 lau GPL 2.0
*/
jQuery.extend({ricevu:function(a,b){$(b).hide();$("body").css("cursor","progress");return this.get(a).fail(function(c){console.error(c.status+" "+c.statusText);b&&($(b).html("Pardonu, okazis netandita eraro: "+c.status+" "+c.statusText+c.responseText),$(b).show())}).always(function(){$("body").css("cursor","default")})},alportu:function(a,b,c){$(c).hide();$("body").css("cursor","progress");return this.post(a,b).fail(function(d){console.error(d.status+" "+d.statusText);c&&($(c).html("Pardonu, okazis netandita eraro: "+
d.status+" "+d.statusText+d.responseText),$(c).show())}).always(function(){$("body").css("cursor","default")})},alportu2:function(a,b){$(b).hide();$("body").css("cursor","progress");return this.post(a).fail(function(c){console.error(c.status+" "+c.statusText);if(b){if(404==c.status){var d="Pardonu, la dosiero ne trovi\u011dis sur la servilo: ";$(b).html(d+JSON.stringify(a.data).replace(/"/g,""))}else d="Pardonu, okazis netandita eraro: ",$(b).html(d+c.status+" "+c.statusText+c.responseText);$(b).show()}}).always(function(){$("body").css("cursor",
"default")})}});
jQuery.fn.extend({selection:function(){this.get(0);if(window.getSelection)return window.getSelection().toString();if(document.getSelection)return document.getSelection().toString()},textarea_selection:function(){var a=this.get(0);if("selection"in document)return a.focus(),document.selection.createRange().text;if("selectionStart"in a)return a.value.substring(a.selectionStart,a.selectionEnd);console.error("selection (preni markitan tekston) ne subtenita por tiu krozilo")},insert:function(a){var b=-1<
navigator.userAgent.toLowerCase().indexOf("chrome")&&-1<navigator.vendor.toLowerCase().indexOf("google");return this.each(function(c){if(b)this.focus(),scrollPos=$(this).scrollTop(),document.execCommand("insertText",!1,a),$(this).scrollTop(scrollPos);else if(document.selection)this.focus(),document.selection.createRange().text=a,this.focus();else if(this.selectionStart||"0"==this.selectionStart){c=this.selectionStart;var d=this.selectionEnd,e=this.scrollTop;this.value=this.value.substring(0,c)+a+
this.value.substring(d,this.value.length);this.focus();this.selectionStart=c+a.length;this.selectionEnd=c+a.length;this.scrollTop=e}else this.value+=a,this.focus()})},get_indent:function(){var a=this.get(0),b=0;if(document.selection&&document.selection.createRange){var c=document.selection.createRange();c.moveStart("character",-200);a=c.text;for(c=a.lastIndexOf("\n");32==a.charCodeAt(c+1+b);)b++}else if(a.selectionStart||"0"==a.selectionStart){var d=a.selectionStart;for(c=a.value.substring(0,d).lastIndexOf("\n");32==
a.value.substring(0,d).charCodeAt(c+1+b);)b++}return str_repeat(" ",b)},indent:function(a){var b=this.get(0);if(document.selection&&document.selection.createRange)alert("tio ankoraux ne funkcias.");else if(b.selectionStart||0==b.selectionStart){var c=b.scrollTop;b.focus();var d=b.selectionStart;0<d&&d--;var e=b.selectionEnd;0<e&&e--;var f=b.value.substring(d,e);""==f?alert("Marku kion vi volas en-/elsxovi."):(a=2==a?f.replace(/\n/g,"\n  "):f.replace(/\n  /g,"\n"),b.value=b.value.substring(0,d)+a+
b.value.substring(e,b.value.length),b.selectionStart=d+1,b.selectionEnd=d+a.length+1,b.scrollTop=c)}},getCursorPosition:function(){var a=this.get(0),b=0;if("selectionStart"in a)b=a.selectionStart;else if("selection"in document){a.focus();b=document.selection.createRange();var c=document.selection.createRange().text.length;b.moveStart("character",-a.value.length);b=b.text.length-c}return b},getCursorLinePos:function(){var a=this.getCursorPosition(),b=this.val();return get_line_pos(a,b)},getCharBeforeCursor:function(){var a=
this.getCursorPosition();return this.val().slice(a-1,a)},xklavo:function(a){function b(r,u){return c[r]||(d[r]?d[r]+u:"")}var c={s:"\u015d",S:"\u015c",c:"\u0109",C:"\u0108",h:"\u0125",H:"\u0124",g:"\u011d",G:"\u011c",u:"\u016d",U:"\u016c",j:"\u0135",J:"\u0134"},d={"\u015d":"s","\u015c":"S","\u0109":"c","\u0108":"C","\u0125":"h","\u0124":"H","\u011d":"g","\u011c":"G","\u016d":"u","\u016c":"U","\u0135":"j","\u0134":"J"},e=this.get(0);if(document.selection&&document.selection.createRange){e.focus();
e=document.selection.createRange();if(""!=e.text)return!0;e.moveStart("character",-1);a=b(e.text,a);if(""!=a)return e.text=a,!1}else if(e.selectionStart||"0"==e.selectionStart){var f=e.selectionStart,g=e.selectionEnd;if(f!=g||0==f)return!0;a=b(e.value.substring(f-1,f),a);if(""!=a){var k=e.scrollTop,l=e.value;e.value=l.substring(0,f-1)+a+l.substring(g,l.length);e.selectionStart=f+a.length-1;e.selectionEnd=e.selectionStart;e.scrollTop=k;return!1}}},selectAll:function(){return this.each(function(a){"selectionStart"in
this?(this.selectionStart=0,this.selectionEnd=this.value.length):this.select?(this.focus(),this.select()):this.selectionRange&&(this.setSelectionRange(0,this.value.length),this.focus())})},selectRange:function(a,b){void 0===b&&(b=a);return this.each(function(){if("selectionStart"in this)this.selectionStart=a,this.selectionEnd=b;else if(this.setSelectionRange)this.setSelectionRange(a,b);else if(this.createTextRange){var c=this.createTextRange();c.collapse(!0);c.moveEnd("character",b);c.moveStart("character",
a);c.select()}this.blur();this.focus();var d=$(this).val();c=Math.max(get_line_pos(a,d).line-5,0);d=get_line_pos(d.length-1,d).line;this.scrollTop=this.scrollHeight*c/d})},form_text:function(){var a="";this.contents().each(function(){3===this.nodeType?a+=this.textContent:"INPUT"==this.tagName?a+=$(this).val():1===this.nodeType&&(a+=$(this).form_text())});return a},validate:function(){var a=!0;this.each(function(b){b=$(this);b.Checks("instance")&&(b.Checks("check")||(a=!1))});return a}});
function xpress(a){a=a.key;if("x"==a||"X"==a)return $(this).xklavo(a)};$.widget("redaktilo.Artikolo",{options:{dosiero:"","re\u011dimo":"redakto","pozici\u015dan\u011do":null,"tekst\u015dan\u011do":null},_create:function(){this._super();this._regex_mrk={_rad:/<rad>([^<]+)<\/rad>/,_dos:/<art\s+mrk="\$Id:\s+([^\.]+)\.xml|<drv\s+mrk="([^\.]+)\./,_mrk:/\smrk\s*=\s*"([^"]+)"/g,_snc:/<snc\s*>\s*(?:<[^>]+>\s*){1,2}([^\s\.,;:?!()]+)/g};this._regex_klr={_klr:/<klr>\.{3}<\/klr>/g};this._regex_drv={_lbr:/\n/g,_mrk:/<drv\s+mrk\s*=\s*"([^"]+)"/,_kap:/<drv[^>]+>\s*<kap>([^]*)<\/kap>/,
_var:/<var>[^]*<\/var>/g,_ofc:/<ofc>[^]*<\/ofc>/g,_fnt:/<fnt>[^]*<\/fnt>/g,_tl1:/<tld\s+lit="(.)"[^>]*>/g,_tl2:/<tld[^>]*>/g};this._regex_txt={_tl0:/<tld\s*\/>/g,_tld:/<tld\s+lit="([^"]+)"\s*\/>/g,_comment:/\s*\x3c!--[^]*?--\x3e[ \t]*/g,_trdgrp:/\s*<trdgrp[^>]*>[^]*?<\/trdgrp\s*>[ \t]*/g,_trd:/\s*<trd[^>]*>[^]*?<\/trd\s*>[ \t]*/g,_fnt:/\s*<fnt[^>]*>[^]*?<\/fnt\s*>[ \t]*/g,_ofc:/\s*<ofc[^>]*>[^]*?<\/ofc\s*>[ \t]*/g,_gra:/\s*<gra[^>]*>[^]*?<\/gra\s*>[ \t]*/g,_uzo:/\s*<uzo[^>]*>[^]*?<\/uzo\s*>[ \t]*/g,
_mlg:/\s*<mlg[^>]*>[^]*?<\/mlg\s*>[ \t]*/g,_frm:/<frm[^>]*>[^]*?<\/frm\s*>/g,_adm:/\s*<adm[^>]*>[^]*?<\/adm\s*>[ ,\t]*/g,_aut:/\s*<aut[^>]*>[^]*?<\/aut\s*>[ ,\t]*/g,_xmltag:/<[^>]+>/g,_lineno:/^(?:\[\d+\])+(?=\[\d+\])/mg,_nom:/<nom[^>]*>[^]*?<\/nom\s*>/g,_nac:/<nac[^>]*>[^]*?<\/nac\s*>/g,_esc:/<esc[^>]*>[^]*?<\/esc\s*>/g};this._regex_xml={_spc:/\s+\/>/g,_amp:/&amp;/g,_ent:/&([a-zA-Z0-9_]+);/g};this.restore();this._change_count=0;this._on({dragover:this._dragOver,drop:this._drop,keydown:this._keydown,
keyup:this._keyup,focus:function(a){this._trigger("pozici\u015dan\u011do",a,null)},click:function(a){this._trigger("pozici\u015dan\u011do",a,null)},change:this._change})},backup:function(){window.localStorage.setItem("red_artikolo",JSON.stringify({xml:this.element.val(),nom:this.option.dosiero,red:this.option.re\u011dimo}))},restore:function(){var a=window.localStorage.getItem("red_artikolo");if(a=a?JSON.parse(a):null)this.element.val(a.xml),this.option.re\u011dimo=a.red,this.option.dosiero=a.nom;
this._setRadiko()},nova:function(a){this.element.val((new XMLArtikolo(a)).xml());this._setOption("re\u011dimo","aldono");this._setOption("dosiero",a.dos)},load:function(a,b){var c=this.element;c.val(b);c.change();this._setOption("re\u011dimo","redakto");this._setOption("dosiero",a)},goto:function(a,b){b=void 0===b?1:b;var c=a.split(":"),d=c[1]||1;a=this.element;c=this.pos_of_line((c[0]||1)-1)+(0<d?d-1:0);a.selectRange(c);a.selectRange(c,c+b)},insert:function(a){var b=this.element;b.insert(a);b.change()},
_setOption:function(a,b){this._super(a,b);"dosiero"===a&&this._setRadiko()},_setRadiko:function(){var a=this.element.val().match(this._regex_mrk._rad);this._radiko=a?a[1]:""},_dragOver:function(a){a.stopPropagation();a.preventDefault();a.originalEvent.dataTransfer.dropEffect="copy"},_drop:function(a){var b=this.element,c=this;a.stopPropagation();a.preventDefault();if((a=a.originalEvent.dataTransfer.files[0])&&a.type.match(/.xml/)){var d=new FileReader;d.onload=function(e){b.val(e.target.result);c.option.re\u011dimo=
"redakto"};d.readAsText(a)}},_keydown:function(a){var b=a.keyCode||a.which;9==b?(a.preventDefault(),b=this.elekto(),-1<b.indexOf("\n")?0==a.shiftKey?this.element.indent(2):this.element.indent(-2):b||(a=this.char_before_pos(),"\n"==a?(a=this.current_indent(-1)||"  ",this.elekto(a)):" "==a&&this.elekto("  "))):8==b&&(b=this.chars_before_pos(),0<b.length&&all_spaces(b)&&0==b.length%2&&(a.preventDefault(),a=this.element,b=a.getCursorPosition(),a.selectRange(b-2,b),a.insert("")))},_keyup:function(a){this._trigger("pozici\u015dan\u011do",
a,{});var b=a.keyCode||a.which;(16>b||32==b||40<b&&91>b||93<b&&111>b||145<b)&&this._trigger("tekst\u015dan\u011do",a,{})},_change:function(a){this._trigger("pozici\u015dan\u011do",a,{});this._trigger("tekst\u015dan\u011do",a,{});this._change_count++;this._change_count%20&&this.backup()},radiko:function(){return this._radiko},elekto:function(a,b){var c=this.element;if(void 0===a)return c.textarea_selection();b!=c.textarea_selection()&&b?console.warn("Ne estas la teksto '"+b+"' \u0109e la elektita loko! Do \u011di ne estas anstat\u016digata."):
c.insert(a)},pos_of_line:function(a){for(var b=this.element.val().split("\n"),c=0,d=0;d<a;d++)c+=b[d].length+1;return c},current_indent:function(a){a=void 0===a?0:a;var b=this.element.getCursorPosition(),c=this.element.val();return enshovo_antaua_linio(c,b+a)},char_before_pos:function(){var a=this.element.getCursorPosition();if(0<a)return this.element.val()[a-1]},chars_before_pos:function(){for(var a=this.element.getCursorPosition(),b=this.element.val(),c=a;0<c&&"\n"!=b[c];)c--;return b.substring(c+
1,a)},art_drv_mrk:function(){var a=this.element.val().match(this._regex_mrk._dos);if(a)return a[1]?a[1]:a[2]},drv_markoj:function(){var a=this.element.val(),b=[],c=0,d=0;if(a){a=a.split("</drv>");for(var e=this._regex_drv,f=0;f<a.length;f++){var g=a[f],k=g.match(e._lbr);k=k?k.length:0;var l=g.match(e._mrk);if(l){mrk=l[1];var r=l.index,u=(l=g.substr(0,r).match(e._lbr))?l.length:0;if(l=g.match(e._kap))kap=l[1].replace(e._var,"").replace(e._ofc,"").replace(e._fnt,"").replace(e._tl1,"$1~").replace(e._tl2,
"~").replace(",",",..").trim(),b.push({line:d+u,pos:c+r,mrk:mrk,kap:kap})}d+=k;c+=g.length+6}}return b},markoj:function(){var a=this.element.val(),b={};if(a)for(var c=this._regex_mrk;null!==(m=c._mrk.exec(a));){var d=m[1];b[d]=b[d]?m.index:1}return b},snc_sen_mrk:function(){var a=this.element.val(),b={};if(a)for(var c=this._regex_mrk;null!==(m=c._snc.exec(a));){var d=m[1];1<d.length&&d[1].toLowerCase()==d[1]&&(d=d.toLowerCase());b[m.index]=d}return b},klr_ppp:function(){var a=this.element.val(),b=
{};if(a)for(var c=this._regex_klr;null!==(m=c._klr.exec(a));)b[m.index]=m[1];return b},tradukoj:function(a){var b=[],c=this._regex_xml;c=this.element.val().replace(c._ent,"?");try{var d=$("vortaro",$.parseXML(c))}catch(e){console.error("Pro nevalida XML ne eblas trovi tradukojn.");return}d.find("[mrk]").each(function(e){e=$(this).attr("mrk");if("rim"!=this.tagName&&"art"!=this.tagName){var f="";$(this).children("kap").contents().each(function(){"tld"==this.tagName?f+="~":3===this.nodeType&&(f+=this.textContent.replace(",",
",.. "))});trdj=[];$(this).children("trd[lng='"+a+"']").each(function(){trdj.push(innerXML(this))});$(this).children("trdgrp[lng='"+a+"']").children("trd").each(function(){trdj.push(innerXML(this))});b.push({mrk:e,kap:f,trd:trdj})}});return b},insert_tradukojn:function(a){var b=this._regex_xml,c=this.element.val().replace(b._ent,"&amp;$1;");try{var d=$("vortaro",$.parseXML(c))}catch(e){console.error("Pro nevalida XML ne eblas en\u015dovi tradukojn.");console.error(e);return}d.find("[mrk]").each(function(e){e=
$(this).attr("mrk");var f=enshovo($(this)[0].previousSibling.nodeValue)+"  ";if(a[e])for(lng in a[e])insert_trd_lng(this,f,lng,a[e][lng])});(c=outerXML(d[0]).replace(b._amp,"&").replace(b._spc,""))&&this.element.val('<?xml version="1.0"?>\n<!DOCTYPE vortaro SYSTEM "../dtd/vokoxml.dtd">\n\n'+c);this.element.change()},drv_before_cursor:function(){for(var a=this.element.getCursorLinePos(),b=this.drv_markoj(),c=b.length-1;0<=c;c--)if(drv=b[c],drv.line<a.line)return drv;return b[0]},plain_text:function(a){a=
void 0===a?!1:a;var b=this._radiko,c=this._regex_txt;b=this.element.val().replace(c._tl0,b).replace(c._tld,"$1"+b.substr(1));if(a){var d=b.split("\n");b="";n=1;for(i=0;i<d.length;i++)b+="["+n+"]"+d[i]+"\n",n++}b=b.replace(c._comment,"").replace(c._trdgrp,"").replace(c._trd,"").replace(c._fnt,"").replace(c._ofc,"").replace(c._gra,"").replace(c._uzo,"").replace(c._mlg,"").replace(c._frm,"").replace(c._adm,"").replace(c._aut,"").replace(c._nom,"").replace(c._nac,"").replace(c._esc,"").replace(c._xmltag,
"");a&&(b=b.replace(c._lineno,""));return b},lines_as_dict:function(a){a=this.plain_text(!0).split("\n");var b={};for(i=0;i<a.length;i++){var c=a[i],d=c.indexOf("]"),e=c.substr(1,d-1);c=c.substr(d+1);1<c.trim().length&&(b[e]=c)}return b}});$.widget("redaktilo.Klavaro",{options:{klavoj:"",artikolo:{},posedanto:"",akampo:"","re\u011dimpremo":null},_create:function(){this._super();var a=this.element;this._akampo_el=$(this.options.akampo);this._on({"click div":this._premo});this._posedanto_el=$(this.options.posedanto);this._posedanto_el.on("blur","textarea,input",function(g){a.data("last-focus",g.target.id)});var b=this.options.klavoj;b||(b=a.text().trim());b=b.split(/[ \n\r\t\f\v]+/);for(var c="",d=0;d<b.length;d++){var e=b[d];if(1==e.length)switch(e){case "\u00a0":c+=
'<div data-btn="&nbsp;" title="spaco nerompebla">]&nbsp;[</div>';break;case "\u202f":c+='<div data-btn="&#x202f;" title="spaceto nerompebla">][</div>';break;default:c+='<div data-btn="'+e+'">'+e+"</div>"}else if(2==e.length)c+='<div class="elm_btn" data-cmd="'+e+'">'+e[0]+"&hellip;"+e[1]+"</div>";else{var f={ctl:"citilo-elemento",nom:"nomo (ne-e-a)",nac:"nacilingva vorto",esc:"escepta vorto",ind:"indeksero",var:"varia\u0135o de kapvorto",frm:"formulo"};if(e in f)c+='<div class="elm_btn" data-cmd="'+
e+'" title="'+f[e]+'">'+e+"</div>";else switch(e){case "[fermu]":c+='<div class="reghim_btn" data-cmd="fermu" title="ka\u015du la klavaron">&#x2b07;&#xFE0E;</div>';break;case "[indiko]":c+='<div class="reghim_btn" data-cmd="indiko" title="indiko-klavaro">&#x2605;&#xFE0E;</div>';break;case "[ser\u0109o]":c+='<div class="reghim_btn" data-cmd="sercho" title="Ser\u0109i la elektitan tekston">&#x1F50D;&#xFE0E;</div>';break;case "[blank]":c+='<div class="reghim_btn" data-cmd="blankigo" title="Blankigu la kampojn">&#x232b;</div>';
break;case "tld":c+='<div class="elm_btn" data-cmd="tld" title="tildo/tildigo">~</div>';break;case "grase":c+='<div class="elm_btn" data-cmd="g" title="grase"><b>g</b></div>';break;case "kursive":c+='<div class="elm_btn" data-cmd="k" title="kursive"><i>k</i></div>';break;case "emfaze":c+='<div class="elm_btn" data-cmd="em" title="emfazo"><strong>em</strong></div>';break;case "sup":c+='<div class="elm_btn" data-cmd="sup" title="suprigite" style="padding-top:0.25em; padding-bottom:0.35em ">a<sup>s</sup></div>';
break;case "sub":c+='<div class="elm_btn" data-cmd="sub" title="subigite">a<sub>s</sub></div>';break;case "minuskloj":c+='<div class="elm_btn" data-cmd="minuskloj" title="minuskligo">A&#x2192;a</div>';break;case "kamelo":c+='<div class="elm_btn" data-cmd="kamelo" title="komenc-majuskloj">&#x2192;Ab</div>';break;default:c+='<div class="elm_btn" data-cmd="'+e+'">'+e+"</div>"}}}a.html(c)},_target:function(){var a=this._akampo_el,b=this.element.data("last-focus");b&&(a=$("#"+b));return a},_premo:function(a){var b=
$(a.currentTarget),c=b.attr("data-btn"),d=b.attr("data-cmd"),e=this._target(),f=this.options.artikolo.Artikolo("radiko");b.hasClass("reghim_btn")?this._trigger("re\u011dimpremo",a,{cmd:d}):"tld"==d?(c=e.textarea_selection(),"~"==c||""==c?e.insert("<tld/>"):(d=f.charAt(0),d=d==d.toUpperCase()?d.toLowerCase():d.toUpperCase(),a=d+f.substr(1),f&&(f=c.replace(f,"<tld/>").replace(a,'<tld lit="'+d+'"/>'),e.insert(f)))):"kamelo"==d?(a=e.textarea_selection(),f=a.includes("<tld")?f:"",e.insert(kameligo(a,f))):
"minuskloj"==d?(a=e.textarea_selection(),e.insert(minuskligo(a,f))):(a=e.textarea_selection(),e.insert(this._ekran_klavo(c,d,a)))},_ekran_klavo:function(a,b,c){return a?a:"\u201e\u201c"==b||"\u201a\u2018"==b?b[0]+(c||"\u2026")+b[1]:"[]"==b||"()"==b?"<klr>"+(c[0]!=b[0]?b[0]:"")+(c||"\u2026")+(c[c.length-1]!=b[1]?b[1]:"")+"</klr>":"var"==b?"<var><kap>"+(c||"\u2026").replace("~","<tld/>")+"</kap></var>":"<"+b+">"+(c||"\u2026")+"</"+b+">"}});$.widget("redaktilo.Checks",{options:{},_create:function(){this._creating=!0;this._super();var a=this.element.attr("id");this.options.nonempty&&(this._nonempty=!0,this._nonempty_msg=this.options.nonempty);"regexp"===typeof this.options.pattern?(a=$("label[for='"+a+"']").text(),this._pattern=this.options.pattern,this._pattern_msg=a?"La donita valoro por "+a+"ne estas valida":"Nevalida valoro."):"object"===typeof this.options.pattern&&(this._pattern=this.options.pattern.regex,this._pattern_msg=this.options.pattern.message);
this._err_fld=$(this.options.err_to)},check:function(){var a=this.element,b=this._err_fld,c=!0;this._nonempty&&""==a.val()?(b.text(this._nonempty_msg),b.show(),c=!1):this._pattern&&!a.val().match(this._pattern)&&(b.text(this._pattern_msg),b.show(),c=!1);c&&b.hide();return c}});
$.widget("redaktilo.Erarolisto",{options:{a_click:null},_create:function(){this._super();this._on({"click li":this._click,"click a":function(a){this._trigger("a_click",a,null)}})},aldonu:function(a){var b=!1,c=(new HTMLError).html(a),d=parseInt(a.line);$("li",this.element).each(function(){if($(this).attr("value")>d)return $(this).before(c),b=!0,!1});b||this.element.append(c)},aldonu_liston:function(a){for(var b=0;b<a.length;b++)this.aldonu(a[b])},_click:function(a){"a"!=a.target.localName&&$("#xml_text").Artikolo("goto",
$(a.currentTarget).attr("value"))}});
function xmlkontrolo$$module$jqu$ui_err(){$("#xml_text").val()?($("body").css("cursor","progress"),$.post("revo_kontrolo",{xml:$("#xml_text").val()}).done(function(a){a=a.length?a:[{msg:"XML estas en ordo (sintakso).",cls:"status_ok"}];$("#dock_eraroj").Erarolisto("aldonu_liston",a.map(function(b){b.msg=quoteattr(b.msg);return b}))}).fail(function(a){console.error(a.status+" "+a.statusText);400==a.status?alert("Eraro dum kontrolado: "+a.responseText):alert("Ho ve, okazis eraro: "+a.status+" "+a.statusText+
" "+a.responseText)}).always(function(){$("body").css("cursor","default")}),mrkkontrolo$$module$jqu$ui_err()):alert("Vi ankora\u016d ne \u015dargis artikolon por kontroli!")}
function mrkkontrolo$$module$jqu$ui_err(){var a=$("#xml_text"),b=a.val(),c=a.Artikolo("markoj");for(mrk in c)if(1<c[mrk]){var d=get_line_pos(c[mrk],b);d.line++;d.pos+=2;d.msg="marko aperas plurfoje: "+mrk;$("#dock_eraroj").Erarolisto("aldonu",d)}if(c=a.Artikolo("snc_sen_mrk")){d=$("#dock_avertoj");a=a.Artikolo("drv_markoj");var e="xxx.0";for(inx in c){for(var f=get_line_pos(inx,b),g=a.length-1;0<=g;g--){var k=a[g];if(k.line<f.line){e=k.mrk;break}}f.line++;f.pos++;f.msg="senco sen marko, <span class='snc_mrk' title='aldonu'>aldonebla kiel: <a>"+
e+"."+c[inx]+"</a></span>";d.Erarolisto("aldonu",f)}}}function klrkontrolo$$module$jqu$ui_err(){var a=$("#xml_text"),b=a.val(),c=a.Artikolo("klr_ppp");if(c)for(pos in a=$("#dock_avertoj"),c)c=get_line_pos(pos,b),c.line++,c.pos++,c.msg="klarigo sen krampoj, <span class='klr_ppp' title='anstata\u016digu'>anstata\u016digebla per: <a>&lt;klr&gt;[\u2026]&lt;/klr&gt;</a></span>",a.Erarolisto("aldonu",c)}
function vortokontrolo$$module$jqu$ui_err(){var a=$("#xml_text").Artikolo("lines_as_dict"),b=0,c={};for(n in a)c[n]=a[n],b++,20==b&&(kontrolu_liniojn$$module$jqu$ui_err(c),b=0,c={});20>b&&kontrolu_liniojn$$module$jqu$ui_err(c)}
function kontrolu_liniojn$$module$jqu$ui_err(a){$("body").css("cursor","progress");var b=Object.keys(a),c="vktrl_"+b[0];$("#dock_avertoj").Erarolisto("aldonu",{id:c,line:b[0],msg:'<span class="animated-dock-font">kontrolante vortojn de linioj '+b[0]+".."+b[b.length-1]+" ...</span>"});a.moduso="kontrolendaj";$.alportu2({url:"analinioj",data:JSON.stringify(a),contentType:"application/json"}).done(function(d){$("#"+c).remove();$("#dock_avertoj").Erarolisto("aldonu_liston",Object.keys(d).map(_ana2txt$$module$jqu$ui_err,
d))}).fail(function(d){console.error(d.status+" "+d.statusText);$("#"+c).html("Okazis erraro dum kontrolo: "+d.statusText)})}
function surmetita_dialogo$$module$jqu$ui_err(a,b,c){$("body").css("cursor","progress");$.get(a,{}).done(function(d,e,f){302==f.status?(console.debug(f.status+" "+f.statusText),alert(f.status+" "+f.statusText)):($("#surmetita").html(d),$("#surmetita_dlg").dialog("option","title",$("#surmetita h1").text()),$("#surmetita h1").remove("h1"));d=$("#surmetita_dlg").parent();d=.7*Math.max(document.documentElement.clientHeight,window.innerHeight||0)-d.children(".ui-dialog-titlebar").height();$("#"+b).height(d);
$("#surmetita_dlg").dialog("open");window.location.hash=c}).fail(function(d){console.error(d.status+" "+d.statusText);400==d.status?$("#surmetita_error").html("Pardonu, okazis eraro dum \u015dargo de la dokumento."):$("#surmetita_error").html("Pardonu, okazis netandita eraro: "+d.status+" "+d.statusText+d.responseText);$("#surmetita_error").show()}).always(function(){$("body").css("cursor","default")})}
function show_error_status$$module$jqu$ui_err(a){plenigu_xmleraro_liston([{line:"nekonata",msg:a.toString().substr(0,256)+"..."}]);$("#elekto_indikoj").hide();$("#dock_klavaro").show();$("#dock_kontrolo").show()}
function _ana2txt$$module$jqu$ui_err(a){var b=this[a],c="";for(i=0;i<b.length;i++)0<i&&(c+="; "),ana=b[i],c+="<span class='"+ana.takso+"'>",c+=ana.analizo||ana.vorto,c+="</span>",c+=" - kontrolinda \u0109ar <span class='ana_klarigo' data-takso='"+ana.takso+"'>",c+=ana.takso+" <a>\u24d8</a></span>";return{line:a,msg:c}}var module$jqu$ui_err={};module$jqu$ui_err.klrkontrolo=klrkontrolo$$module$jqu$ui_err;module$jqu$ui_err.mrkkontrolo=mrkkontrolo$$module$jqu$ui_err;
module$jqu$ui_err.show_error_status=show_error_status$$module$jqu$ui_err;module$jqu$ui_err.surmetita_dialogo=surmetita_dialogo$$module$jqu$ui_err;module$jqu$ui_err.vortokontrolo=vortokontrolo$$module$jqu$ui_err;module$jqu$ui_err.xmlkontrolo=xmlkontrolo$$module$jqu$ui_err;function _ser\u0109o_preparo$$module$jqu$ui_srch(){if($("#sercho_sercho").validate())return $("#sercho_trovoj").html(""),$("#sercho_trovoj button").off("click"),!0}
function vikiSer\u0109o$$module$jqu$ui_srch(a){a.preventDefault();_ser\u0109o_preparo$$module$jqu$ui_srch()&&$.alportu("citajho_sercho",{sercho:$("#sercho_sercho").val(),kie:"vikipedio"},"#sercho_error").done(function(b){if(b.query&&b.query.pages){b=b.query.pages;var c=new HTMLTrovoDt;for(p in b){var d=b[p],e="https://eo.wikipedia.org/?curid="+d.pageid;$("#sercho_trovoj").append('<dd id="trv_'+d.pageid+'">');$("#trv_"+d.pageid).Trovo({"\u015dablono":c,valoroj:{url:e,title:d.title,descr:d.extract,
data:d}})}}else $("#sercho_trovoj").append("<p>&nbsp;&nbsp;Neniuj trovoj.</p>")})}function _bib_url$$module$jqu$ui_srch(a,b){for(var c=0;c<a.length;c++)if(entry=a[c],entry.value==b)return entry.url}
function cita\u0135oSer\u0109o$$module$jqu$ui_srch(a){a.preventDefault();_ser\u0109o_preparo$$module$jqu$ui_srch()&&$.alportu("citajho_sercho",{sercho:$("#sercho_sercho").val(),kie:a.data},"#sercho_error").done(function(b){var c=$("#ekzemplo_bib").autocomplete("option","source"),d=new HTMLFonto(c),e=new HTMLTrovoDt;if(b.length&&b[0].cit)for(var f=0;f<b.length;f++){var g=b[f],k=g.cit.fnt,l=k.url?k.url:k.bib?_bib_url$$module$jqu$ui_srch(c,k.bib):"",r=make_percent_bar(100*g.sim,bar_styles[12],20,20);
$("#sercho_trovoj").append('<dd id="trv_'+f+'">');$("#trv_"+f).Trovo({"\u015dablono":e,valoroj:{prompt:'&nbsp;&nbsp;<span class="perc_bar">'+r.str+"</span>&nbsp;&nbsp;",url:l,title:"("+(f+1)+") "+d.html(k),descr:g.cit.ekz,data:g}})}else $("#sercho_trovoj").append("<p>&nbsp;&nbsp;Neniuj trovoj.</p>")})}
function retoSer\u0109o$$module$jqu$ui_srch(a){a.preventDefault();_ser\u0109o_preparo$$module$jqu$ui_srch()&&$.alportu("citajho_sercho",{sercho:$("#sercho_sercho").val(),kie:"anaso"},"#sercho_error").done(function(b){var c="",d=0,e=$("#sercho_sercho").val().split(" ")[0];b=b.replace(/<img\b[^>]*>/ig,"");var f=new HTMLTrovoDt;$(b).find(".result-link,.result-snippet").filter(function(){var g=$(this);if(g.is(".result-link")){var k=g.attr("href"),l=k.search("http");c=0<=l?decodeURIComponent(k.substr(l)):
k;last_title=g.text()}else g.is(".result-snippet")&&(g=g.text(),0<=last_title.search(e)||0<=g.search(e))&&($("#sercho_trovoj").append('<dd id="trv_'+d+'">'),k=c.replace(/&rut=[a-f0-9]+/,""),$("#trv_"+d).Trovo({"\u015dablono":f,valoroj:{url:k,title:last_title,descr:g,data:{url:k,title:last_title,snip:g}}}),d++)});0==d&&$("#sercho_trovoj").append("<p>&nbsp;&nbsp;Neniuj trovoj.</p>")})}
function bildoSer\u0109o$$module$jqu$ui_srch(a){a.preventDefault();_ser\u0109o_preparo$$module$jqu$ui_srch()&&$.alportu("bildo_sercho",{sercho:$("#sercho_sercho").val(),kie:"vikimedio"},"#sercho_error").done(function(b){var c=[];if(b.query&&b.query.search&&b.query.search.length){b=b.query.search;var d=new HTMLTrovoDt,e=new HTMLTrovoDdBld;for(p in b){var f=b[p];c.push(f.pageid);$("#sercho_trovoj").append('<dd id="trv_'+f.pageid+'">');$("#trv_"+f.pageid).Trovo({type:"bildo","\u015dablono":d,"bld_\u015dablono":e,
valoroj:{title:f.title,descr:f.snippet}})}}else $("#sercho_trovoj").append("<p>&nbsp;&nbsp;Neniuj trovoj.</p>");for(;c.length;)_bildo_info$$module$jqu$ui_srch(c.slice(0,5)),c=c.slice(5)})}
function _bildo_info$$module$jqu$ui_srch(a){a=a.join("|");$.alportu("bildo_info",{paghoj:a,kie:"vikimedio"},"#sercho_error").done(function(b){for(var c=0;c<b.length;c++)if(data=b[c],data.query&&data.query.pages){var d=data.query.pages,e;for(e in d){var f=d[e];f=$("#trv_"+f.pageid).Trovo("bildinfo",f,0==c,function(g,k){k&&_bildo_info_2$$module$jqu$ui_srch(k.title);$("#bildo_dlg").dialog("open");$("#tabs").tabs("option","active",0)});f.length&&_bildeto_info$$module$jqu$ui_srch(f)}}})}
function _bildeto_info$$module$jqu$ui_srch(a){a=a.join("|");$.alportu("bildeto_info",{dosieroj:a,kie:"vikimedio"},"#sercho_error").done(function(b){if(b.query&&b.query.pages){b=b.query.pages;for(var c in b){var d=b[c];pageid=d.pageid;d.thumbnail&&$('#sercho_trovoj div.bildstriero a[href$="'+quoteattr(d.title)+'"]').html('<img src="'+d.thumbnail.source+'"/>')}}})}
function _bildo_info_2$$module$jqu$ui_srch(a){$.alportu("bildo_info_2",{dosiero:a,kie:"vikimedio"},"#sercho_error").done(function(b){if(b.query&&b.query.pages){b=b.query.pages;for(var c in b){var d=b[c];pageid=d.pageid;d.thumbnail&&$("#bildo_eta").attr("src",d.thumbnail.source);var e=d.title;if(d.imageinfo&&d.imageinfo.length){var f=d.imageinfo[0].extmetadata;var g=f.Attribution?f.Attribution.value:f.Artist?f.Artist.value:"";f.Credit&&(g+=", "+f.Credit.value.replace("Own work","propra verko"));f.ImageDescription&&
(e=f.ImageDescription.value);f=f.LicenseShortName.value}else f=g="<meta-informoj mankas...>";var k={};k.url=decodeURI(d.original?d.original.source:d.canonicalurl);k.fmt=d.original?d.original.width/d.original.height:0;k.aut=forigu_markup(g);k.prm=f;k.fnt=decodeURI(d.canonicalurl);k.frazo=forigu_markup(e);$("#bildo_dlg input[type!='radio']").val("");$("#bildo_dlg").dialog("valoroj",k);$("#bildeto_url").attr("href",k.fnt)}}})}
$.widget("redaktilo.Trovo",{options:{type:"teksto","\u015dablono":new HTMLTrovoDt,"bld_\u015dablonono":null,valoroj:{prompt:"&nbsp;&nbsp;&#x25B6;&#xFE0E;",url:null,title:"",descr:"",data:{},enm_btn:!0}},_create:function(){this._super();var a=this.options,b=a.valoroj;b.id=this.element.attr("id");var c=a.\u015dablono.html(b);this.element.before(c);b.descr&&this.element.text(b.descr);"teksto"==a.type&&($("#r_"+b.id).RigardoBtn({url:b.url}),$("#e_"+b.id).EkzemploBtn({data:b.data,enmetu:function(d,e){$("#ekzemplo_dlg input").val("");
$("#ekzemplo_dlg").dialog("valoroj",e);$("#ekzemplo_dlg").dialog("open");$("#tabs").tabs("option","active",0)}}))},bildinfo:function(a,b,c){b=void 0===b?!1:b;var d=this.options,e=d.valoroj,f=a.pageid;e.data=a;e.url=a.canonicalurl;e.url&&($("#r_trv_"+f).RigardoBtn({url:e.url}),$("#e_trv_"+f).BildoBtn({data:e.data,enmetu:c}),$("#sercho_trovoj a[href='"+f+"']").attr("href",e.url));a.thumbnail&&($("#trv_"+f).html(d.bld_\u015dablono.html({original:a.original.source,thumbnail:a.thumbnail.source,t_html:$("#trv_"+
f).html()})),b&&0==a.ns&&$("#trv_"+f).append('<div class="bildstrio"></div>'));b=[];if(a.images)for(var g in a.images)if(d=a.images[g],e=d.title.slice(-4).toLowerCase(),".jpg"==e||".png"==e){e="https://commons.wikimedia.org/wiki/"+d.title;var k=d.title.slice(5,-4),l=a.pageid+"_"+d.title.hashFnv32a(!0);$("#trv_"+f+" > div").append("<div class='bildstriero'><p class='butonoj'><button id='r_"+l+"'/> <button id='e_"+l+"'/></p><a target='_new' href='"+e+"'>"+k+"</a></div>");$("#r_"+l).RigardoBtn({url:e});
$("#e_"+l).BildoBtn({data:d,enmetu:c});b.push(d.title)}return b}});$.widget("redaktilo.RigardoBtn",{options:{url:null},_create:function(){this._super();var a=this.element;a.attr("style","visibility: hidden");a.attr("type","button");a.attr("title","sur aparta pa\u011do");a.html("Rigardu");this._on({click:function(b){if(this.options.url)b.preventDefault(),window.open(this.options.url);else throw nedifinita_url;}})}});
$.widget("redaktilo.EkzemploBtn",{options:{data:null,enmetu:null},_create:function(){this._super();var a=this.element;a.attr("style","visibility: hidden");a.attr("type","button");a.attr("title","en la XML-tekston");a.html("Enmetu");this._on({click:function(b){var c={},d=this.options.data;d.cit?(c=d.cit.fnt,c.frazo=d.cit.ekz):d.pageid?(c.url="https://eo.wikipedia.org/?curid="+d.pageid,c.bib="Viki",c.lok=d.title,c.frazo=d.title):d.snip&&(c.frazo=d.snip,c.url=d.url,c.vrk=d.title);this._trigger("enmetu",
b,c)}})}});$.widget("redaktilo.BildoBtn",{options:{data:null,enmetu:null},_create:function(){this._super();var a=this.element;a.attr("style","visibility: hidden");a.attr("type","button");a.attr("title","en la XML-tekston");a.html("Enmetu");this._on({click:function(b){this._trigger("enmetu",b,this.options.data)}})}});var module$jqu$ui_srch={};module$jqu$ui_srch.bildoSer\u0109o=bildoSer\u0109o$$module$jqu$ui_srch;module$jqu$ui_srch.cita\u0135oSer\u0109o=cita\u0135oSer\u0109o$$module$jqu$ui_srch;
module$jqu$ui_srch.retoSer\u0109o=retoSer\u0109o$$module$jqu$ui_srch;module$jqu$ui_srch.vikiSer\u0109o=vikiSer\u0109o$$module$jqu$ui_srch;var pozicio_xml$$module$jqu$ui_tabl="",pozicio_html$$module$jqu$ui_tabl="",$jscompDefaultExport$$module$jqu$ui_tabl=function(){$("#tabs").tabs({activate:activate_tab$$module$jqu$ui_tabl,beforeActivate:before_activate_tab$$module$jqu$ui_tabl});var a=$("#xml_text").Artikolo({"pozici\u015dan\u011do":function(){var b=$("#xml_text").getCursorLinePos();$("#edit_position").text("linio "+(b.line+1)+", "+(b.pos+1))},"tekst\u015dan\u011do":function(){$("#collapse_outline").accordion({active:!1});$("#rigardo").empty()}});
$("#xml_text").keypress(xpress);$("#collapse_outline").accordion({collapsible:!0,heightStyle:"content",beforeActivate:function(b,c){c.newPanel&&fill_outline$$module$jqu$ui_tabl()}});$("#dock_eraroj").Erarolisto({});$("#dock_avertoj").Erarolisto({a_click:function(b){b=$(b.currentTarget);var c=b.parent();if(c.hasClass("snc_mrk")){var d=$("#xml_text");d.Artikolo("goto",c.parent().attr("value"),4);d.Artikolo("elekto",'<snc mrk="'+b.text()+'"',"<snc");c.parent().remove()}else c.hasClass("klr_ppp")?(d=
$("#xml_text"),d.Artikolo("goto",c.parent().attr("value"),14),d.Artikolo("elekto",b.text(),"<klr>...</klr>"),c.parent().remove()):surmetita_dialogo$$module$jqu$ui_err("static/anaklar.html","klarigo_teksto","klarigo_"+c.attr("data-takso"))}});$("#help_btn").button({});$("#help_btn").on("click",function(b,c){window.open($("#help_btn > a").attr("href"))});$("#logout_btn").button({});$("#logout_btn").on("click",function(b,c){location.href="../auth/logout"});$("#dock_klavaro").Klavaro({artikolo:a,posedanto:"#xml_text",
akampo:"#xml_text","re\u011dimpremo":function(b,c){switch(c.cmd){case "fermu":$("#dock_klavaro").hide();$("#kromklavaro").show();break;case "indiko":montri_indikojn$$module$jqu$ui_tabl();break;case "sercho":$("#tabs").tabs("option","active",2)}}});$("#kromklavaro").hide();$("#kromklavaro").click(function(){switch_dock_klavaro_kontrolo$$module$jqu$ui_tabl()});switch_dock_klavaro_kontrolo$$module$jqu$ui_tabl();$("#dock_fermu").click(function(){$("#elekto_indikoj").hide();$("#dock_kontrolo").hide();
$("#dock_klavaro").hide();$("#kromklavaro").show()});plenigu_elekto_indikoj$$module$jqu$ui_tabl();$("#re_antaurigardo").click(function(){$("#tabs").tabs("option","active",1);antaurigardo$$module$jqu$ui_tabl()});$("#s_vikipedio").click(vikiSer\u0109o$$module$jqu$ui_srch);$("#s_klasikaj").click("klasikaj",cita\u0135oSer\u0109o$$module$jqu$ui_srch);$("#s_postaj").click("postaj",cita\u0135oSer\u0109o$$module$jqu$ui_srch);$("#s_anaso").click(retoSer\u0109o$$module$jqu$ui_srch);$("#s_bildoj").click(bildoSer\u0109o$$module$jqu$ui_srch);
$("#sercho_butonoj").Klavaro({artikolo:$("#xml_text"),posedanto:"#sercho_sercho",akampo:"#sercho_sercho","re\u011dimpremo":function(b,c){"blankigo"==c.cmd&&$("#sercho_sercho").val("")}});$("#sercho_sercho").keypress(xpress);$("#sercho_error").hide();$("#sercho_sercho").Checks({nonempty:"Malplena ser\u0109okampo. Kion vi volas ser\u0109i?",pattern:{regex:/^../,message:"Bonvolu doni pli longan ser\u0109a\u0135on. Ne eblas ser\u0109i la\u016d unuopa signo."},err_to:"#sercho_error"});$(window).on("unload",
function(){$("#xml_text").Artikolo("backup")});$("#dock_avertoj").tooltip({items:"span.ana_klarigo",content:function(){switch($(this).attr("data-takso")){case "neanalizebla":return'Vorto <span class="neanalizebla">neanalizebla</span>, ekz. \u0109ar: <ul><li>Radiko a\u016d vortelemento mankas en la vortaro, evitinda, sen klara vortspeco. Ekz. "in" apliki\u011das nur al bestoj. <li>Vorto fremdlingva a\u016d nomo, ofte aperantaj en ekzemploj: "Carlos". Marku per &lt;nac&gt; a\u016d &lt;nom&gt;. <li>Vorto mal\u011duste kunigita, ekz. "depost" anstata\u016d "de post"... En\u015dovu spacsignon a\u016d en cita\u0135o marku per &lt;esc&gt;. <li>Vorto kun ne-ea litero a\u016d alia signo: Volap|\u00fc|k, \u011deni[n]ta k.s. <li>Mallongigo, kiun la vortanalizilo ne komprenas. <li>Verbo ne markita kiel transitiva, ekz. "abol/it/a". <li>Vorto ne derivita/kunmetita la\u016dgramatike.</ul>';
case "dubebla":return'Vortoj <span class="dubebla">dubeblaj</span> havas pli ol tri radikojn, kio estas relative malofte, kaj povas signi misanalizitan vorton, sed eble anka\u016d tajperaron.';case "kuntirita":return' Vortoj <span class="kuntirita">kuntiritaj</span> foje estas, depende de la vidpunkto, mal\u011dustaj a\u016d stile neglataj. Ordinare oni ne kuntiras adverbon kun posta adjektivo "\u0135usnaskita" anstata\u016d "\u0135us naskita", "nebona" anstata\u016d "ne bona". Sed multaj, eble influita de sia nasklingvo, tamen faras. Mi rekomendas korekti tian uzon en difinoj, sed en cita\u0135oj marki per &lt;esc&gt;.'}}})};
function montri_indikojn$$module$jqu$ui_tabl(){switch_dock_indikoj$$module$jqu$ui_tabl()}function montri_kromklavaron$$module$jqu$ui_tabl(){switch_dock_klavaro_kontrolo$$module$jqu$ui_tabl()}function kontroli_artikolon$$module$jqu$ui_tabl(){$("#dock_eraroj").empty();$("#dock_avertoj").empty();xmlkontrolo$$module$jqu$ui_err();klrkontrolo$$module$jqu$ui_err();vortokontrolo$$module$jqu$ui_err();switch_dock_klavaro_kontrolo$$module$jqu$ui_tabl()}
function switch_dock_indikoj$$module$jqu$ui_tabl(){$("#elekto_indikoj").show();$("#dock_kontrolo").hide();$("#dock_klavaro").hide();$("#kromklavaro").show()}function switch_dock_klavaro_kontrolo$$module$jqu$ui_tabl(){$("#elekto_indikoj").hide();$("#dock_kontrolo").show();$("#dock_klavaro").show();$("#kromklavaro").hide()}
function fill_outline$$module$jqu$ui_tabl(){var a=$("#xml_text").Artikolo("drv_markoj"),b="<ol>";if(a)for(var c=0;c<a.length;c++){var d=a[c],e="outline_"+d.line,f="#"+e;b+='<li id="'+e+'" value="'+(d.line+1)+'">'+d.kap+"</li>";$("#art_outline").on("click",f,d,function(g){iru_al$$module$jqu$ui_tabl(g.data)})}b+="</ol>";$("#art_outline").empty();$("#art_outline").html(b)}
function iru_al$$module$jqu$ui_tabl(a){if(a){var b=$("#tabs").tabs("option","active");0==b?($("#xml_text").selectRange(a.pos),$("#xml_text").selectRange(a.pos,a.pos+5),pozicio_xml$$module$jqu$ui_tabl=a):1==b&&(window.location.hash=a.mrk,pozicio_html$$module$jqu$ui_tabl=a)}}
function before_activate_tab$$module$jqu$ui_tabl(a,b){a=b.oldPanel[0].id;b=b.newPanel[0].id;"xml"==a&&"sercho"==b?(a=$("#xml_text"),b=a.Artikolo("elekto"),a=a.Artikolo("radiko"),b=replaceTld(a,b).replace(/<[^>]+>/g,"").replace(/\s\s+/g," "),0<b.length&&$("#sercho_sercho").val(b)):"html"==a&&"sercho"==b&&(b=$("#rigardo").selection(),0<b.length&&$("#sercho_sercho").val(b))}
function activate_tab$$module$jqu$ui_tabl(a,b){a=b.oldPanel[0].id;b=b.newPanel[0].id;"xml"==a&&"html"==b&&(pozicio_html$$module$jqu$ui_tabl=pozicio_xml$$module$jqu$ui_tabl=$("#xml_text").Artikolo("drv_before_cursor"));"html"==b?$("#xml_text").val()&&!$("#rigardo").html()&&antaurigardo$$module$jqu$ui_tabl():"xml"==b&&("html"==a&&pozicio_xml$$module$jqu$ui_tabl.mrk!=pozicio_html$$module$jqu$ui_tabl.mrk&&(pozicio_xml$$module$jqu$ui_tabl=pozicio_html$$module$jqu$ui_tabl,iru_al$$module$jqu$ui_tabl(pozicio_xml$$module$jqu$ui_tabl)),
$("#xml_text").focus())}
function antaurigardo$$module$jqu$ui_tabl(){$("#xml_text").val()&&($("body").css("cursor","progress"),$.post("revo_rigardo",{xml:$("#xml_text").val()}).done(function(a){$("#rigardo").html(a);"undefined"!=typeof MathJax&&MathJax.Hub&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]);$("#rigardo a").each(function(){var b=$(this).attr("href");b&&"#"!=b[0]&&"http"!=b.substr(0,4)&&("/"!=b[0]&&"."!=b[0]?(b="http://retavortaro.de/revo/art/"+b,$(this).attr("href",b),$(this).attr("target","_new")):"../"==b.substr(0,
3)?(b="http://retavortaro.de/revo/"+b.substr(3),$(this).attr("href",b),$(this).attr("target","_new")):"/"==b[0]&&(b="http://retavortaro.de"+b,$(this).attr("href",b),$(this).attr("target","_new")))});$("#rigardo img").each(function(){var b=$(this).attr("src");"../bld/"==b.substr(0,7)&&$(this).attr("src","http://retavortaro.de/revo/bld/"+b.substr(7))});$("#rigardo source").each(function(){var b=$(this).attr("srcset");"../bld/"==b.substr(0,7)&&$(this).attr("srcset","http://retavortaro.de/revo/bld/"+
b.substr(7))});restore_preferences();preparu_art();iru_al$$module$jqu$ui_tabl(pozicio_html$$module$jqu$ui_tabl)}).fail(function(a){console.error(a.status+" "+a.statusText);400==a.status?$("#rigardo").html("<p>Eraro dum transformado:</p><pre>"+quoteattr(a.responseText)+"</pre>"):alert("Ho ve, okazis eraro: "+a.status+" "+a.statusText+" "+a.responseText)}).always(function(){$("body").css("cursor","default")}))}
function plenigu_elekto_indikoj$$module$jqu$ui_tabl(){var a=$.ricevu("../voko/stiloj.xml","#elekto_indikoj"),b=$.ricevu("../voko/fakoj.xml","#elekto_indikoj");$.when(a,b).done(function(c,d){var e="";e+="<div class='reghim_btn' data-cmd='fermu' title='ka\u015du la klavaron'><span>ka\u015du<br/>&#x2b07;&#xFE0E;</span></div><div class='reghim_btn' data-cmd='klavaro' title='krom-klavaro'><span>&lt;&hellip;&gt;<br/>[&hellip;]</span></div>";$("stilo",c).each(function(f,g){e+="<div class='stl' data-stl='"+
$(this).attr("kodo")+"' title='stilo: "+$(this).text()+"'><span>"+$(this).text()+"<br/>"+$(this).attr("kodo")+"</span></div>"});$("fako",d).each(function(f,g){e+="<div class='fak' data-fak='"+$(this).attr("kodo")+"' title='fako: "+$(this).text()+"'><img src='"+$(this).attr("vinjeto")+"' alt='"+$(this).attr("kodo")+"'><br/>"+$(this).attr("kodo")+"</div>"});e+="<div class='ofc' data-ofc='*' title='fundamenta (*)'><span>funda-<br/>menta</span></div>";for(c=1;10>c;c++)e+="<div class='ofc' data-ofc='"+
c+"' title='"+c+"a oficiala aldono'><span><b>"+c+"a</b> aldono</span></div>";e+="<div class='gra' data-vspec='tr' title='vortspeco: transitiva verbo'><span>tr.<br/>verbo</span></div>";e+="<div class='gra' data-vspec='ntr' title='vortspeco: netransitiva verbo'><span>netr.<br/>verbo</span></div>";e+="<div class='gra' data-vspec='x' title='vortspeco: verbo (x)'><span>tr./ntr.<br/>verbo</span></div>";e+="<div class='gra' data-vspec='abs.' title='vortspeco: absoluta, senkomplementa verbo'><span>abs.<br/>verbo</span></div>";
e+="<div class='gra' data-vspec='subst.' title='vortspeco: substantivo'><span>subs- tantivo</span></div>";e+="<div class='gra' data-vspec='adj.' title='vortspeco: substantivo'><span>adjek- tivo</span></div>";e+="<div class='gra' data-vspec='adv.' title='vortspeco: substantivo'><span>adver- bo</span></div>";e+="<div class='gra' data-vspec='artikolo' title='vortspeco: artikolo'><span>arti-<br/>kolo</span></div>";e+="<div class='gra' data-vspec='determinilo' title='vortspeco: determinilo'><span>deter- minilo</span></div>";
e+="<div class='gra' data-vspec='interjekcio' title='vortspeco: interjekcio'><span>inter- jekcio</span></div>";e+="<div class='gra' data-vspec='konjunkcio' title='vortspeco: konjunkcio'><span>konjunk- cio</span></div>";e+="<div class='gra' data-vspec='prefikso' title='vortspeco: prefikso'><span>pre- fikso</span></div>";e+="<div class='gra' data-vspec='sufikso' title='vortspeco: sufikso'><span>su-<br/>fikso</span></div>";e+="<div class='gra' data-vspec='prepozicio' title='vortspeco: prepozicio'><span>prepo- zicio</span></div>";
e+="<div class='gra' data-vspec='prepozicia\u0135o' title='vortspeco: prepozicia\u0135o'><span>prepo- zicia\u0135o</span></div>";e+="<div class='gra' data-vspec='pronomo' title='vortspeco: pronomo'><span>pro- nomo</span></div>";$("#elekto_indikoj").html(e);$("#elekto_indikoj").on("click","div",indikon_enmeti$$module$jqu$ui_tabl)})}
function indikon_enmeti$$module$jqu$ui_tabl(a){a.preventDefault();a="";var b=$(this).attr("data-cmd");if("fermu"==b)$("#elekto_indikoj").hide(),$("#kromklavaro").show();else if("klavaro"==b)montri_kromklavaron$$module$jqu$ui_tabl();else{switch(this.className){case "stl":a='<uzo tip="stl">'+$(this).attr("data-stl")+"</uzo>";break;case "fak":a='<uzo tip="fak">'+$(this).attr("data-fak")+"</uzo>";break;case "ofc":a="<ofc>"+$(this).attr("data-ofc")+"</ofc>";break;case "gra":a="<gra><vspec>"+$(this).attr("data-vspec")+
"</vspec></gra>"}a&&$("#xml_text").insert(a)}}var module$jqu$ui_tabl={};module$jqu$ui_tabl.activate_tab=activate_tab$$module$jqu$ui_tabl;module$jqu$ui_tabl.before_activate_tab=before_activate_tab$$module$jqu$ui_tabl;module$jqu$ui_tabl.default=$jscompDefaultExport$$module$jqu$ui_tabl;module$jqu$ui_tabl.kontroli_artikolon=kontroli_artikolon$$module$jqu$ui_tabl;module$jqu$ui_tabl.montri_indikojn=montri_indikojn$$module$jqu$ui_tabl;module$jqu$ui_tabl.montri_kromklavaron=montri_kromklavaron$$module$jqu$ui_tabl;var $jscompDefaultExport$$module$jqu$ui_menu=function(){$("#menu").menu({items:"> :not(.ui-widget-header)",select:menu_selected$$module$jqu$ui_menu})};
function menu_selected$$module$jqu$ui_menu(a,b){a=b.item.attr("id");switch(a){case "nova_menu_item":$("#krei_dlg").dialog("open");break;case "shargi_menu_item":$("#shargi_dlg").dialog("open");break;case "lastaj_menu_item":$("#lastaj_dlg").dialog("open");break;case "sendiservile_menu_item":$("#sendiservile_dlg").dialog("open");break;case "kontroli_menu_item":kontroli_artikolon$$module$jqu$ui_tabl();break;case "referenco_menu_item":$("#referenco_dlg").dialog("option","enmetu_en","xml_text");$("#referenco_dlg").dialog("open");
break;case "ekzemplo_menu_item":$("#ekzemplo_dlg").dialog("option","enmetu_en","xml_text");$("#ekzemplo_dlg").dialog("open");break;case "bildo_menu_item":$("#bildo_dlg").dialog("open");break;case "derivajho_menu_item":$("#derivajho_dlg").dialog("open");break;case "senco_menu_item":$("#senco_dlg").dialog("open");break;case "tradukoj_menu_item":$("#traduko_dlg").dialog("open");break;case "sxablono_menu_item":$("#sxablono_dlg").dialog("open");break;case "rimarko_menu_item":$("#rimarko_dlg").dialog("open");
break;case "indiko_menu_item":montri_indikojn$$module$jqu$ui_tabl();break;case "homonimoj_menu_item":$("#homonimo_dlg").dialog("open");break;case "datumprotekto_menu_item":surmetita_dialogo$$module$jqu$ui_err("static/datumprotekto.html","deklaro_teksto");break;default:alert("Neniu ago difinita por menuero "+a)}}var module$jqu$ui_menu={};module$jqu$ui_menu.default=$jscompDefaultExport$$module$jqu$ui_menu;$.widget("ui.dialog",$.ui.dialog,{options:{kampoj:{},autoOpen:!1,width:"auto",closeText:"",show:{effect:"fade"},hide:{effect:"fade"},"valor\u015dan\u011do":null},valoroj:function(a){var b=this.options.kampoj;if(void 0===a){a={};for(var c in b){var d=$(b[c]);"checkbox"==d.attr("type")||"radio"==d.attr("type")?a[c]=d.is(":checked"):a[c]=$(d).val()}return a}for(d in b)if(c=$(b[d]),d in a){var e=a[d]?a[d]:"";"checkbox"==c.attr("type")||"radio"==c.attr("type")?c.prop("checked",a[d]):c.val(e)}this._trigger("valor\u015dan\u011do")},
shrink:function(){el=this.element;el.hide();el.prev(".ui-dialog-titlebar").hide();this._setOption("position",{my:"center top",at:"center top+5",of:"#xml"});$("#xml_text").focus()},expand:function(){el=this.element;el.show();el.prev(".ui-dialog-titlebar").show();this._setOption("position",{my:"center center",at:"center center",of:window})},toggle:function(){this.element.is(":visible")?this.shrink():this.expand()}});
var $jscompDefaultExport$$module$jqu$ui_dlg=function(){$("#krei_dlg").dialog({kampoj:{dos:"#krei_dos",rad:"#krei_rad",fin:"#krei_fin",dif:"#krei_dif"},buttons:{Krei:function(){var a=$("#krei_dlg").dialog("valoroj");$("#xml_text").Artikolo("nova",a);$("#dock_eraroj").empty();$("#dock_avertoj").empty();$(this).dialog("close")},"\u2718":function(){$(this).dialog("close")}},open:function(){$("#krei_error").hide()}});$("#krei_butonoj").Klavaro({artikolo:$("#xml_text"),posedanto:"#krei_dlg",akampo:"#krei_dif",
"re\u011dimpremo":function(a,b){"blankigo"==b.cmd&&($("#krei_dlg input").val(""),$("#krei_dif").val(""))}});$("#krei_rad").keypress(xpress);$("#krei_dif").keypress(xpress);$("#shargi_dlg").dialog({kampoj:{dosiero:"#shargi_dosiero"},buttons:{"\u015cargi":function(a){a.preventDefault();$("#shargi_dosiero").validate()&&(a=$("#shargi_dlg").dialog("valoroj"),download_art$$module$jqu$ui_dlg(a.dosiero,"#shargi_error","#shargi_dlg"),$("#dock_eraroj").empty(),$("#dock_avertoj").empty())},"\u2718":function(){$(this).dialog("close")}},
open:function(){$("#shargi_error").hide();$("#shargi_sercho").selectAll()}});$("#shargi_sercho").keypress(xpress);$("#shargi_sercho").autocomplete({source:shargi_sercho_autocomplete$$module$jqu$ui_dlg,select:function(a,b){$("#shargi_dosiero").val(b.item.art+".xml")}});$("#shargi_sercho").Checks({pattern:{regex:/^[a-zA-Z 0-9\u0109\u011d\u0125\u0135\u015d\u016d\u0108\u011c\u0124\u0134\u015c\u016c-]+$/,message:"La ser\u0109esprimo konsistu nur el esperantaj literoj, ciferoj, streketo kaj spacsignoj. Interpunkcioj kaj apostrofo ne estas permesitaj."},
err_to:"#shargi_error"});$("#shargi_dosiero").Checks({pattern:{message:"La dosiernomo (krom xml-fina\u0135o) konsistu el almena\u016d unu litero kaj eble pliaj: simplaj literoj kaj ciferoj",regex:/^[a-zA-Z][0-9_a-zA-Z]*(\.xml)?$/},err_to:"#shargi_error"});$("#lastaj_dlg").dialog({kampoj:{dosiero:"#lastaj_mesagho"},position:{my:"top",at:"top+10",of:window},buttons:[{text:"Reredakti",id:"lastaj_reredakti",disabled:!0,click:function(a){a.preventDefault();if($("#lastaj_dosiero").validate())if("eraro"!=
$("#lastaj_dosiero").data("rezulto"))$("#lastaj_error").text("Vi povas reredakti nur artikolojn, \u0109e kiuj trovi\u011dis eraro dum traktado de la redaktoservo."),$("#lastaj_error").show();else{a=$("#lastaj_dosiero").data("url");var b=$("#lastaj_dosiero").val();download_url$$module$jqu$ui_dlg(a,b,"#lastaj_error","#lastaj_dlg");$("#dock_eraroj").empty();$("#dock_avertoj").empty()}}},{text:"\u25f1",click:function(){$("#lastaj_dlg").dialog("toggle")}},{text:"\u2718",click:function(){$(this).dialog("close")}}],
open:function(){$("#lastaj_dlg").dialog("expand");plenigu_lastaj_liston$$module$jqu$ui_dlg();$("#lastaj_error").show()}});$("#lastaj_dosiero").Checks({pattern:{message:"Bonvolu elekti artikolon en la listo por malfermi.",regex:/^[a-zA-Z][0-9_a-zA-Z]*(\.xml)?$/},err_to:"#lastaj_error"});$("#lastaj_tabelo").on("click","td",lastaj_tabelo_premo$$module$jqu$ui_dlg);$("#lastaj_rigardu").click(function(a){a.preventDefault();a=$(this).data("url");window.open(a)});$("#sendiservile_dlg").dialog({buttons:{Submeti:sendi_artikolon_servile$$module$jqu$ui_dlg,
"(Sendi)":sendi_artikolon_servile$$module$jqu$ui_dlg,"\u2718":function(){$(this).dialog("close")}},open:function(){$("#sendiservile_error").hide();"aldono"==$("#xml_text").Artikolo("option","re\u011dimo")?($("#sendiservile_komento").val($("#krei_dos").val()),$("#sendiservile_komento").prop("disabled",!0)):($("#sendiservile_komento").val(""),$("#sendiservile_komento").prop("disabled",!1))}});$("#sendiservile_komento").Checks({nonemtpy:"Necesas doni mallongan priskribon de viaj \u015dan\u011doj. Kion vi redaktis?",
pattern:{regex:/^[\x20-\x7E]+$/,message:"En la priskribo nur askiaj signoj (ekz. latinaj, sed ne \u0109apelitaj literoj estas permesitaj). La versiosistemo CVS ne subtenas unikodon en \u015dan\u011dkomentoj. Do bv. anstata\u016digu ekz. \u0109 per ch ktp."},err_to:"#sendiservile_error"});$("#referenco_dlg").dialog({kampoj:{tip:"#referenco_tipo",grp:"#referenco_grp",cel:"#referenco_celo",lst:"#referenco_listo",enh:"#referenco_enhavo"},buttons:{"Enmeti la referencon":referenco_enmeti$$module$jqu$ui_dlg,
"\u25f1":function(){$("#referenco_dlg").dialog("toggle")},"\u2718":function(){$(this).dialog("close")}},open:function(){$("#referenco_error").hide();$("#referenco_dlg").dialog("expand");var a=$("#xml_text").textarea_selection();a&&($("#referenco_celo").val(""),$("#referenco_enhavo").val(""),$("#referenco_sercho").val(a),$("#referenco_sercho").autocomplete("search"))}});$("#referenco_listo").keypress(xpress);$("#referenco_sercho").keypress(xpress);$("#referenco_enhavo").keypress(xpress);$("#referenco_sercho").Checks({err_to:"#referenco_error",
pattern:{regex:/^[a-zA-Z 0-9\u0109\u011d\u0125\u0135\u015d\u016d\u0108\u011c\u0124\u0134\u015c\u016c\-]+$/,message:"La ser\u0109esprimo konsistu nur el esperantaj literoj, ciferoj, streketoj kaj spacsignoj. Interpunkcioj kaj apostrofo ne estas permesitaj."}});$("#referenco_listo").prop("disabled","lst"!=$("#referenco_tipo").val());$("#referenco_tipo").change(function(){"lst"==$("#referenco_tipo").val()?$("#referenco_listo").prop("disabled",!1):($("#referenco_listo").val(""),$("#referenco_listo").prop("disabled",
!0))});plenigu_referenco_listojn$$module$jqu$ui_dlg();$("#referenco_sercho").autocomplete({source:referenco_sercho_autocomplete$$module$jqu$ui_dlg,select:function(a,b){a=b.item;b=""==a.num?a.kap:a.kap+"<sncref/>";$("#referenco_celo").val(a.mrk);$("#referenco_enhavo").val(b)}});$("#ekzemplo_dlg").dialog({kampoj:{frazo:"#ekzemplo_frazo",bib:"#ekzemplo_bib",vrk:"#ekzemplo_vrk",aut:"#ekzemplo_aut",url:"#ekzemplo_url",lok:"#ekzemplo_lok"},buttons:{"Enmeti la ekzemplon":function(a){ekzemplo_enmeti$$module$jqu$ui_dlg(a,
!1)},"... nur la fonton":function(a){ekzemplo_enmeti$$module$jqu$ui_dlg(a,!0)},"\u25f1":function(){$("#ekzemplo_dlg").dialog("toggle")},"\u2718":function(){$(this).dialog("close")}},open:function(){$("#ekzemplo_error").hide();$("#ekzemplo_dlg").dialog("expand")}});plenigu_ekzemplo_bib$$module$jqu$ui_dlg();$("#ekzemplo_butonoj").Klavaro({artikolo:$("#xml_text"),posedanto:"#ekzemplo_dlg",akampo:"#ekzemplo_frazo","re\u011dimpremo":function(a,b){"blankigo"==b.cmd&&($("#ekzemplo_dlg input").val(""),$("#ekzemplo_frazo").val(""))}});
$("#ekzemplo_frazo").keypress(xpress);$("#ekzemplo_bib").keypress(xpress);$("#ekzemplo_vrk").keypress(xpress);$("#ekzemplo_aut").keypress(xpress);$("#ekzemplo_lok").keypress(xpress);$("#bildo_dlg").dialog({kampoj:{url:"#bildo_url",aut:"#bildo_aut",prm:"#bildo_prm",fnt:"#bildo_fnt",fmt:"#bildo_fmt",frazo:"#bildo_frazo"},buttons:{"Enmeti la bildon":function(a){bildo_enmeti$$module$jqu$ui_dlg(a,!1)},"\u25f1":function(){$("#bildo_dlg").dialog("toggle")},"\u2718":function(){$(this).dialog("close")}},open:function(){$("#bildo_error").hide();
$("#bildo_dlg").dialog("expand");1<parseFloat($("#bildo_fmt").val())?bildo_lar\u011decoj$$module$jqu$ui_dlg([640,320],640):bildo_lar\u011decoj$$module$jqu$ui_dlg([576,360,180],360);$("#bildo_lrg input").checkboxradio("refresh")},"valor\u015dan\u011do":function(){1<parseFloat($("#bildo_fmt").val())?bildo_lar\u011decoj$$module$jqu$ui_dlg([640,320],640):bildo_lar\u011decoj$$module$jqu$ui_dlg([576,360,180],360);$("#bildo_lrg input").checkboxradio("refresh")}});$("#bildo_lrg input").checkboxradio();$("#bildo_lrg").controlgroup();
$("#bildo_butonoj").Klavaro({artikolo:$("#xml_text"),posedanto:"#bildo_dlg",akampo:"#bildo_frazo","re\u011dimpremo":function(a,b){"blankigo"==b.cmd&&($("#bildo_dlg input[type!='radio']").val(""),$("#bildo_frazo").val(""))}});$("#bildo_frazo").keypress(xpress);$("#derivajho_dlg").dialog({kampoj:{kap:"#derivajho_kap",dif:"#derivajho_dif"},buttons:{"Enmeti la deriva\u0135on":derivajho_enmeti$$module$jqu$ui_dlg,"\u25f1":function(){$("#derivajho_dlg").dialog("toggle")},"\u2718":function(){$(this).dialog("close")}},
open:function(){$("#derivajho_error").hide();$("#derivajho_dlg").dialog("expand")}});$("#derivajho_butonoj").Klavaro({artikolo:$("#xml_text"),posedanto:"#derivajho_dlg",akampo:"#derivajho_dif","re\u011dimpremo":function(a,b){"blankigo"==b.cmd&&($("#derivajho_dlg input").val(""),$("#derivajho_dif").val(""))}});$("#derivajho_kap").keypress(xpress);$("#derivajho_dif").keypress(xpress);$("#senco_dlg").dialog({kampoj:{mrk:"#senco_mrk",dif:"#senco_dif"},buttons:{"Enmeti la sencon":senco_enmeti$$module$jqu$ui_dlg,
"\u25f1":function(){$("#senco_dlg").dialog("toggle")},"\u2718":function(){$(this).dialog("close")}},open:function(){$("#senco_error").hide();$("#senco_dlg").dialog("expand")}});$("#senco_butonoj").Klavaro({artikolo:$("#xml_text"),posedanto:"#senco_dlg",akampo:"#senco_dif","re\u011dimpremo":function(a,b){"blankigo"==b.cmd&&($("#senco_dlg input").val(""),$("#senco_dif").val(""))}});$("#senco_dif").keypress(xpress);plenigu_lingvojn$$module$jqu$ui_dlg();$("#traduko_dlg").dialog({position:{my:"top",at:"top+10",
of:window},buttons:{"Enmeti la tradukojn":function(a){tradukojn_enmeti$$module$jqu$ui_dlg(a)},"\u2718":function(){$(this).dialog("close")}},open:function(){$("#traduko_error").hide();$("#traduko_tradukoj").data("trd_shanghoj",{});plenigu_lingvojn_artikolo$$module$jqu$ui_dlg();$("#traduko_menuo").menu("refresh");fill_tradukojn$$module$jqu$ui_dlg(preflng,$("#trd_pref_"+preflng).text());var a=Math.max(document.documentElement.clientHeight,window.innerHeight||0),b=$("#traduko_dlg").parent();a=.8*a-b.children(".ui-dialog-titlebar").height()-
b.children(".ui-dialog-buttonpane").height();$(".dlg_tab_div").height(a)}});$("#traduko_menuo").menu({items:"> :not(.ui-widget-header)",select:shanghu_trd_lingvon$$module$jqu$ui_dlg});$("#traduko_tabelo").on("blur","input",traduko_memoru_fokuson$$module$jqu$ui_dlg);$("#traduko_butonoj").on("click","div",traduko_butono_premo$$module$jqu$ui_dlg);plenigu_sxablonojn$$module$jqu$ui_dlg();$("#sxablono_dlg").dialog({buttons:{"Enmeti la tekston":sxablono_enmeti$$module$jqu$ui_dlg,"\u25f1":function(){$("#sxablono_dlg").dialog("toggle")},
"\u2718":function(){$(this).dialog("close")}},open:function(){$("#sxablono_error").hide();$("#sxablono_dlg").dialog("expand")}});$("#sxablono_butonoj").Klavaro({artikolo:$("#xml_text"),posedanto:"#sxablono_dlg",akampo:""});$("#sxablono_elekto").change(kiam_elektis_sxablonon$$module$jqu$ui_dlg);$(".controlgroup-vertical").controlgroup({direction:"vertical"});$("#rimarko_dlg").dialog({kampoj:{aut:"#rimarko_aut",rim:"#rimarko_rim",adm:"#rimarko_adm"},buttons:{"Enmeti la rimarkon":function(a){a.preventDefault();
a=$("#rimarko_dlg").dialog("valoroj");a.rim=linirompo(a.rim.replace(/~/g,"<tld/>"),indent=2);a.elm=a.adm?"adm":"rim";a=(new XMLRimarko(a,tip=a.elm)).xml(indent=4);$("#xml_text").Artikolo("insert",a);$("#rimarko_dlg").dialog("close");$(this).dialog("close")},"\u25f1":function(){$("#rimarko_dlg").dialog("toggle")},"\u2718":function(){$(this).dialog("close")}},open:function(){$("#rimarko_error").hide();$("#rimarko_dlg").dialog("expand")}});$("#rimarko_butonoj").Klavaro({artikolo:$("#xml_text"),posedanto:"#riarko_dlg",
akampo:"#rimarko_rim","re\u011dimpremo":function(a,b){"blankigo"==b.cmd&&($("#rimarko_dlg input").val(""),$("#rimarko_rim").val(""))}});$("#rimarko_rim").keypress(xpress);$("#homonimo_dlg").dialog({kampoj:{dosiero:"#homonimo_dos"},position:{my:"top",at:"top+10",of:window},buttons:{"\u015cargi":function(a){hom_art_shargi$$module$jqu$ui_dlg(a)},"\u25f1":function(){$("#homonimo_dlg").dialog("toggle")},"\u2718":function(){$(this).dialog("close")}},open:function(){$("#homonimo_dlg").dialog("expand");plenigu_homonimo_liston$$module$jqu$ui_dlg();
$("#homonimo_error").show()}});$("#homonimo_tabelo").on("click","td.hom_art",homonimo_tabelo_premo$$module$jqu$ui_dlg);$("#surmetita_dlg").dialog({position:{my:"left top",at:"left+20 top+20",of:window},maxWidth:"90%"})};
function shargi_sercho_autocomplete$$module$jqu$ui_dlg(a,b){$("#shargi_dosiero").val("");if($("#shargi_sercho").validate()){var c=[];$.alportu("revo_sercho",{sercho:a.term,lng:"eo"},"#shargi_error").done(function(d,e,f){if(302==f.status)console.debug(f.status+" "+f.statusText),alert("Seanco fini\u011dis. Bonvolu resaluti!");else for(e=0;e<d.length;e++)c[e]={value:""!=d[e].num?d[e].kap+" "+d[e].num:d[e].kap,art:d[e].art};b(c)})}}
function hom_art_shargi$$module$jqu$ui_dlg(a){a.preventDefault();a=$("#homonimo_dlg").dialog("valoroj");download_art$$module$jqu$ui_dlg(a.dosiero,"#homonimo_error","#homonimo_dlg",do_close=!1)}
function download_art$$module$jqu$ui_dlg(a,b,c,d){d=void 0===d?!0:d;".xml"==a.slice(-4)&&(a=a.slice(0,-4));$.alportu2({url:"revo_artikolo",method:"POST",data:{art:a}},b).done(function(e){"<?xml"==e.substr(0,5)?($("#xml_text").Artikolo("load",a,e),$("#collapse_outline").accordion("option","active",0),$(b).hide(),$("#tabs").tabs("option","active",0),d?$(c).dialog("close"):$(c).dialog("shrink")):$(b).html("Okazis eraro, supozeble necesas resaluti.")})}
function download_url$$module$jqu$ui_dlg(a,b,c,d,e){e=void 0===e?!0:e;$.ricevu(a,c).done(function(f){"<?xml"==f.substr(0,5)?($("#xml_text").Artikolo("load",b,f),$("#collapse_outline").accordion("option","active",0),$(c).hide(),$("#tabs").tabs("option","active",0),e?$(d).dialog("close"):$(d).dialog("shrink")):$(c).html("Okazis eraro, supozeble necesas resaluti.")})}
function sendi_artikolon_servile$$module$jqu$ui_dlg(a){a.preventDefault();var b="Submeti"==$(a.target).text()?"api":"email";a=$("#xml_text").Artikolo("option","re\u011dimo");if($("#sendiservile_komento").validate()){var c=$("#sendiservile_komento").val(),d="aldono"==a?c:$("#xml_text").Artikolo("art_drv_mrk");$.alportu("revo_sendo",{xml:$("#xml_text").val(),shangho:c,redakto:a,metodo:b,dosiero:d},"#sendiservile_error").done(function(e){var f=$("#xml_text").Artikolo("option","dosiero");e=e.html_url;
f="<b>'"+f+"'</b> sendita. "+("api"==b?"Kelkajn tagojn vi trovas vian redakton <a target='_new' href='"+e+"'>tie \u0109i \u0109e Github</a> kaj sub 'Lastaj...'.":"Bv. kontroli \u0109u vi ricevis kopion de la retpo\u015dto.\n(En tre esceptaj okazoj la spam-filtrilo povus bloki \u011din...)");$("#dock_eraroj").Erarolisto("aldonu",{id:"art_sendita_msg",cls:"status_ok",msg:f});$("#sendiservile_dlg").dialog("close");$("#xml_text").val("");$("#shargi_dlg input").val("")})}}
function plenigu_referenco_listojn$$module$jqu$ui_dlg(){$.ricevu("../voko/klasoj.xml","#referenco_error").done(function(a){var b={};$("#referenco_listo").autocomplete({source:$("kls",a).map(function(c,d){c=$(this).attr("nom").split("#")[1];d=$(this).attr("mrk");var e=$(this).attr("kap");if(b[c])return!1;b[c]=!0;d&&(d=d.split("#")[1]);return{value:c,mrk:d,kap:e}}).get(),select:referenco_listo_elekto$$module$jqu$ui_dlg})})}
function referenco_listo_elekto$$module$jqu$ui_dlg(a,b){b.item.mrk&&$("#referenco_sercho").val("");b.item.mrk&&$("#referenco_celo").val(b.item.mrk);b.item.kap&&$("#referenco_enhavo").val(b.item.kap)}
function referenco_sercho_autocomplete$$module$jqu$ui_dlg(a,b){if($("#referenco_sercho").validate()){var c=[];$.alportu("revo_sercho",{sercho:a.term,lng:"eo"},"#referenco_error").done(function(d){var e;for(e=0;e<d.length;e++){var f=d[e],g=f.kap;f.num&&(g+=" "+f.num+" ["+f.mrk.split(".").slice(2)+"]");c[e]={value:g,mrk:f.mrk,kap:f.kap,num:f.num}}b(c)})}}
function referenco_enmeti$$module$jqu$ui_dlg(a){a.preventDefault();$("#referenco_error").hide();a=$("#referenco_dlg").dialog("valoroj");var b=a.grp?(new XMLReferencGrupo(a)).xml():(new XMLReferenco(a)).xml();var c=$("#referenco_dlg").dialog("option","enmetu_en")||"xml_text";"xml_text"==c?$("#"+c).insert(b):$("#"+c).text(b.trim());$("#"+c).change();a.grp&&($("#referenco_dlg").dialog("valoroj",{grp:!1,tip:"nuda"}),$("#referenco_listo").val(""),$("#referenco_listo").prop("disabled",!0));$("#referenco_dlg").dialog("close")}
function plenigu_ekzemplo_bib$$module$jqu$ui_dlg(){$.ricevu("../voko/biblist.xml","#ekzemplo_error").done(function(a){$("#ekzemplo_bib").autocomplete({source:$("vrk",a).map(function(b,c){return{value:$(this).children("bib").text(),label:$(this).children("text").text(),url:$(this).children("url").text()}}).get()})})}
function ekzemplo_enmeti$$module$jqu$ui_dlg(a,b){a.preventDefault();$("#ekzemplo_error").hide();a=$("#ekzemplo_dlg").dialog("valoroj");b?b=(new XMLFonto(a)).xml(indent=8):(a.frazo=linirompo(a.frazo,indent=2),b=(new XMLEkzemplo(a)).xml(indent=6));a=$("#ekzemplo_dlg").dialog("option","enmetu_en")||"xml_text";"xml_text"==a?$("#"+a).insert(b):$("#"+a).text(b.trim());$("#"+a).change();$("#ekzemplo_dlg").dialog("close")}
function bildo_enmeti$$module$jqu$ui_dlg(a,b){a.preventDefault();$("#bildo_error").hide();bld=$("#bildo_dlg").dialog("valoroj");bld.lrg=$("#bildo_lrg input:checked").val()||360;bld.fnt_dec=bld.fnt;bld.fnt=encodeURI(bld.fnt);bld.frazo=linirompo(bld.frazo,indent=4);a=(new XMLBildo(bld)).xml(indent=4);$("#xml_text").insert(a);$("#xml_text").change();$("#bildo_dlg").dialog("close")}
function bildo_lar\u011decoj$$module$jqu$ui_dlg(a,b){$("#bildo_lrg input").each(function(c){c=$(this);c.prop("checked",!1);var d=parseInt(c.attr("value"));0<=a.indexOf(d)?($("#bildo_lrg label[for='bildo_lrg_"+d+"']").show(),d==b&&c.prop("checked",!0)):$("#bildo_lrg label[for='bildo_lrg_"+d+"']").hide()})}
function derivajho_enmeti$$module$jqu$ui_dlg(a){a.preventDefault();$("#derivajho_error").hide();a=$("#derivajho_dlg").dialog("valoroj");a.dif=linirompo(a.dif,indent=2);a.mrk=$("#xml_text").Artikolo("art_drv_mrk");a=(new XMLDeriva\u0135o(a)).xml();$("#xml_text").insert(a);$("#xml_text").change();$("#derivajho_dlg").dialog("close")}
function senco_enmeti$$module$jqu$ui_dlg(a){a.preventDefault();$("#senco_error").hide();a=$("#senco_dlg").dialog("valoroj");a.dif=linirompo(a.dif,indent=2);try{a.drvmrk=$("#xml_text").Artikolo("drv_before_cursor").mrk}catch(b){a.drvmrk="XXXXXXX.YYY",show_error_status$$module$jqu$ui_err(b)}sncxml=(new XMLSenco(a)).xml();$("#xml_text").insert(sncxml);$("#xml_text").change();$("#senco_dlg").dialog("close")}
function plenigu_lingvojn$$module$jqu$ui_dlg(){var a=$.get("revo_preflng").fail(),b=$.ricevu("../voko/lingvoj.xml","#traduko_error");$.when(a,b).done(function(c,d){var e=c[0];preflng=e[0]||"en";var f="",g="",k="",l="",r="",u="",w="",x="";$("lingvo",d).sort(jsort_lng$$module$jqu$ui_dlg).each(function(t,q){t=$(this).attr("kodo");if("eo"!=t){-1<$.inArray(t,e)&&(x+='<li id="trd_pref_'+$(this).attr("kodo")+'"><div>'+$(this).text()+"</div></li>");t=$(this).text();q=t.charAt(0);var v=$(this).attr("kodo");
if("a"<=q&&"b">=q)f+='<li id="trd_chiuj_'+v+'"><div>'+t+"</div></li>";else if("c"<=q&&"g">=q||"\u0109"==q||"\u011d"==q)g+='<li id="trd_chiuj_'+v+'"><div>'+t+"</div></li>";else if("h"<=q&&"j">=q||"\u0125"==q||"\u0135"==q)k+='<li id="trd_chiuj_'+v+'"><div>'+t+"</div></li>";else if("k"<=q&&"l">=q)l+='<li id="trd_chiuj_'+v+'"><div>'+t+"</div></li>";else if("m"<=q&&"o">=q)r+='<li id="trd_chiuj_'+v+'"><div>'+t+"</div></li>";else if("p"<=q&&"s">=q||"\u015d"==q)u+='<li id="trd_chiuj_'+v+'"><div>'+t+"</div></li>";
else if("t"<=q&&"z">=q||"\u016d"==q)w+='<li id="trd_chiuj_'+v+'"><div>'+t+"</div></li>"}});$("#traduko_aliaj").before(x);$("#traduko_chiuj_a_b").append(f);$("#traduko_chiuj_c_g").append(g);$("#traduko_chiuj_h_j").append(k);$("#traduko_chiuj_k_l").append(l);$("#traduko_chiuj_m_o").append(r);$("#traduko_chiuj_p_s").append(u);$("#traduko_chiuj_t_z").append(w);$("#traduko_menuo").menu("refresh")})}
function plenigu_lingvojn_artikolo$$module$jqu$ui_dlg(){var a=$("#xml_text").val();lng_nomoj={};for(var b in traduk_lingvoj(a))a=$("#trd_chiuj_"+b).children("div").text(),lng_nomoj[a]=b;for(var c=Object.keys(lng_nomoj).sort(sort_lng$$module$jqu$ui_dlg),d="",e=0;e<c.length;e++)a=c[e],b=lng_nomoj[a],d+='<li id="trd_art_'+b+'"><div>'+a+"</div></li>";$("#traduko_artikolaj").empty();$("#traduko_artikolaj").append(d)}
function traduko_memoru_fokuson$$module$jqu$ui_dlg(a){$("#traduko_dlg").data("last-focus",this.id)}
function traduko_butono_premo$$module$jqu$ui_dlg(a){a=$(this).attr("data-cmd");var b=$("#traduko_dlg").data("last-focus").replace(/\./g,"\\.").replace(/:/g,"\\:")||"";if(b){b=$("#"+b);var c=b.textarea_selection();b.insert("[]"==a||"()"==a?"<klr>"+(c[0]!=a[0]?a[0]:"")+(c||"\u2026")+(c[c.length-1]!=a[1]?a[1]:"")+"</klr>":"<"+a+">"+(c||"\u2026")+"</"+a+">");trd_input_shanghita$$module$jqu$ui_dlg(b[0])}}
function jsort_lng$$module$jqu$ui_dlg(a,b){a=$(a).text();b=$(b).text();for(var c=0,d=Math.min(a.length,b.length);a.charAt(c)===b.charAt(c)&&c<d;)c++;return"AaBbC\u0108c\u0109DdEeFfG\u011cg\u011dH\u0124h\u0125IiJ\u0134j\u0135KkLlMmNnOoPpRrS\u015cs\u015dTtU\u016cu\u016dVvZz".indexOf(a.charAt(c))>"AaBbC\u0108c\u0109DdEeFfG\u011cg\u011dH\u0124h\u0125IiJ\u0134j\u0135KkLlMmNnOoPpRrS\u015cs\u015dTtU\u016cu\u016dVvZz".indexOf(b.charAt(c))?1:-1}
function sort_lng$$module$jqu$ui_dlg(a,b){for(var c=0,d=Math.min(a.length,b.length);a.charAt(c)===b.charAt(c)&&c<d;)c++;return"AaBbC\u0108c\u0109DdEeFfG\u011cg\u011dH\u0124h\u0125IiJ\u0134j\u0135KkLlMmNnOoPpRrS\u015cs\u015dTtU\u016cu\u016dVvZz".indexOf(a.charAt(c))>"AaBbC\u0108c\u0109DdEeFfG\u011cg\u011dH\u0124h\u0125IiJ\u0134j\u0135KkLlMmNnOoPpRrS\u015cs\u015dTtU\u016cu\u016dVvZz".indexOf(b.charAt(c))?1:-1}
function fill_tradukojn$$module$jqu$ui_dlg(a,b){$("#traduko_tradukoj").off("click");$("#traduko_tradukoj").off("change");var c=$("#xml_text").Artikolo("tradukoj",a),d=$("#traduko_tradukoj").data("trd_shanghoj")||{},e="";if(c)for(var f=0;f<c.length;f++){var g=c[f];if(g.kap)var k="<b>"+g.kap+"</b>";else k=g.mrk.split("."),k="&nbsp;&nbsp;&nbsp;..("+k[k.length-1]+")";e+="<tr><td>"+k+"</td><td>";try{var l=d[g.mrk][a]}catch(r){l=g.trd}if(l&&l.length)for(j=0;j<l.length;j++)e+=traduko_input_field$$module$jqu$ui_dlg(g.mrk,
j,quoteattr(l[j])),e+="<br/>";else e+=traduko_input_field$$module$jqu$ui_dlg(g.mrk,0,"")+"<br/>";e+="</td>";e+="<td>"+traduko_add_btn$$module$jqu$ui_dlg(g.mrk)+"</td>";e+="</tr>"}$("#traduko_lingvo").text(b+" ["+a+"]");$("#traduko_dlg").data("lng",a);$("#traduko_tradukoj").empty();$("#traduko_tradukoj").html(e);$("#traduko_tradukoj").on("change","input",trd_shanghita$$module$jqu$ui_dlg)}function trd_shanghita$$module$jqu$ui_dlg(){trd_input_shanghita$$module$jqu$ui_dlg(this)}
function trd_input_shanghita$$module$jqu$ui_dlg(a){var b=a.id.split(":")[1],c=$("#traduko_dlg").data("lng");$("#traduko_tradukoj input[id^='trd\\:"+b+"\\:']").each(function(){var d=this.id.split(":")[2];trd_put$$module$jqu$ui_dlg(b,c,d,$(this).val())})}function trd_put$$module$jqu$ui_dlg(a,b,c,d){var e=$("#traduko_tradukoj").data("trd_shanghoj")||{};e[a]||(e[a]={});e[a][b]||(e[a][b]=[]);e[a][b][c]=d;$("#traduko_tradukoj").data("trd_shanghoj",e)}
function traduko_input_field$$module$jqu$ui_dlg(a,b,c){a="trd:"+a+":"+b;return'<input id="'+a+'" name="'+a+'" size="30" value="'+c+'"/>'}
function traduko_add_btn$$module$jqu$ui_dlg(a){var b=a.replace(/\./g,"\\.");$("#traduko_tradukoj").on("click","#trdadd\\:"+b,function(){var c=$("#trd\\:"+b+"\\:0");if(c){c=c.parent().children("input:last-of-type");var d=c.attr("id").split(":");d=d[0]+":"+d[1]+":"+(parseInt(d[2])+1);c.after('<br/><input id="'+d+'" name="'+d+'" size="30" value=""/>')}});return'<button id="trdadd:'+a+'" class="ui-button ui-widget ui-corner-all ui-button-icon-only" title="Aldonu"><span class="ui-icon ui-icon-plus"></span></button>'}
function shanghu_trd_lingvon$$module$jqu$ui_dlg(a,b){(a=b.item.attr("id"))&&"trd_"==a.substr(0,4)&&(a=a.split("_")[2],b=b.item.text(),fill_tradukojn$$module$jqu$ui_dlg(a,b));$("#traduko_dlg").data("last-focus","")}function tradukojn_enmeti$$module$jqu$ui_dlg(a){a=$("#traduko_tradukoj").data("trd_shanghoj");try{$("#xml_text").Artikolo("insert_tradukojn",a),$("#traduko_dlg").dialog("close")}catch(b){$("#traduko_error").html(b.toString()),$("#traduko_error").show()}}
function plenigu_sxablonojn$$module$jqu$ui_dlg(){var a="",b;for(b in snc_sxablonoj)a+="<option>"+b+"</option>";$("#sxablono_elekto").append(a)}
function kiam_elektis_sxablonon$$module$jqu$ui_dlg(a){a=$("#sxablono_elekto").val();$("#sxablono_xml").empty();$("#sxablono_xml").off("keypress");$("#sxablono_xml").off("click");$("#sxablono_xml").append((new Snc\u015cablono(a)).html());$("#sxablono_xml button").click(sxablono_button_click$$module$jqu$ui_dlg);$("#sxablono_xml b.sxbl").click(sxablono_strike_click$$module$jqu$ui_dlg);$("#sxablono_xml span.sxbl").click(sxablono_span_click$$module$jqu$ui_dlg);$("#sxablono_xml input").keypress(xpress)}
function sxablono_button_click$$module$jqu$ui_dlg(a){a.preventDefault();if(a=$(a.target).closest("button").prev("span"))a.html().startsWith("&lt;ref")?($("#referenco_dlg").dialog("option","enmetu_en",a[0].id),$("#referenco_dlg").dialog("open")):a.html().startsWith("&lt;ekz")&&($("#ekzemplo_dlg").dialog("option","enmetu_en",a[0].id),$("#ekzemplo_dlg").dialog("open"))}
function sxablono_strike_click$$module$jqu$ui_dlg(a){a=$(a.target).closest("tr").find("pre");var b=a.css("text-decoration-line");a.css("text-decoration-line","none"==b?"line-through":"none")}function sxablono_span_click$$module$jqu$ui_dlg(a){a=a.target.id;a.startsWith("r_")?($("#referenco_dlg").dialog("option","enmetu_en",a),$("#referenco_dlg").dialog("open")):a.startsWith("e_")&&($("#ekzemplo_dlg").dialog("option","enmetu_en",a),$("#ekzemplo_dlg").dialog("open"))}
function sxablono_enmeti$$module$jqu$ui_dlg(a){var b="";$("#sxablono_xml pre").each(function(){var c=$(this);"line-through"!=c.css("text-decoration-line")&&(b+=c.form_text()+"\n")});$("#xml_text").insert(b);$("#xml_text").change();$("#sxablono_dlg").dialog("close")}
function plenigu_lastaj_liston$$module$jqu$ui_dlg(){$("body").css("cursor","progress");$.ricevu("revo_lastaj_redaktoj","#lastaj_error").done(function(a,b,c){if(302==c.status)console.debug(c.status+" "+c.statusText),alert(c.status+" "+c.statusText);else{b="";for(h=0;h<a.length;h++){c=a[h];switch(c.rezulto){case "eraro":var d="&#x26a0;";break;case "konfirmo":d="&#x2713;";break;default:d="&#x23f2"}b+='<tr class="last_art" id="'+c.id+'"><td>'+c.name.split(".")[0]+"</a></td><td>"+d+"</td><td>"+c.created.substring(0,
16).replace("T"," ")+"</td><td>"+c.desc.split(":").slice(1).join(":")+"</td></tr>"}$("#lastaj_listo").html(b);$("#lastaj_listo").data("detaloj",a)}})}
function lastaj_tabelo_premo$$module$jqu$ui_dlg(a){a.preventDefault();var b=$(a.target).parent().attr("id");if(a=$("#lastaj_listo").data("detaloj").filter(function(c){if(c.id==b)return c}))a=a[0],$("#lastaj_dosiero").val(a.name),$("#lastaj_dosiero").data("url",a.xml_url),$("#lastaj_rigardu").data("url",a.html_url),$("#lastaj_dosiero").data("rezulto",a.rezulto),"eraro"==a.rezulto?$("#lastaj_reredakti").button("enable"):$("#lastaj_reredakti").button("disable"),$("#lastaj_mesagho").val(""),a.rez_url?
$.ricevu(a.rez_url).done(function(c){(c=JSON.parse(c))&&c.mesagho&&(c=c.mesagho.replace(/\|\| */g,"\n").replace("[m ","["),$("#lastaj_mesagho").val(c))}):a.rezulto||$("#lastaj_mesagho").val("Atendante traktadon...")}
function plenigu_homonimo_liston$$module$jqu$ui_dlg(){$("body").css("cursor","progress");$("#homonimo_error").show();$.ricevu("homonimoj_senref","#homonimo_error").done(function(a,b,c){if(302==c.status)console.debug(c.status+" "+c.statusText),alert(c.status+" "+c.statusText);else{b="";c=null;for(h=0;h<a.length;h++){var d=a[h];c&&c.kap==d.kap&&c.art1==d.art2&&c.art2==d.art1||(b+="<tr><td>"+d.kap+'</td><td class="hom_art">'+d.art1+'</td><td class="hom_art">'+d.art2+"</td></tr>");c=d}$("#homonimo_listo").html(b);
$("#homonimo_error").html("Aktuale ne \u0109iuj interreferencoj <br/> ka\u015ditaj en (sub-)sencoj trovi\u011das. Do ne \u0109iun okazon necesas korekti.")}a=$("#homonimo_dlg").parent();a=.7*Math.max(document.documentElement.clientHeight,window.innerHeight||0)-a.children(".ui-dialog-titlebar").height();$("#homonimo_tabelo").height(a)})}function homonimo_tabelo_premo$$module$jqu$ui_dlg(a){a.preventDefault();a=$(a.target).text();$("#homonimo_dos").val(a)}var module$jqu$ui_dlg={};
module$jqu$ui_dlg.default=$jscompDefaultExport$$module$jqu$ui_dlg;module$jqu$ui_dlg.shargi_sercho_autocomplete=shargi_sercho_autocomplete$$module$jqu$ui_dlg;/*
 (c) 2016 - 2018 Wolfram Diestel
 lau GPL 2.0
*/
var preflng$$module$jqu$ui_kreo="en";$(document).ready(function(){$(function(){$jscompDefaultExport$$module$jqu$ui_tabl();$jscompDefaultExport$$module$jqu$ui_menu();$jscompDefaultExport$$module$jqu$ui_dlg();$(document).tooltip()})});var module$jqu$ui_kreo={};
